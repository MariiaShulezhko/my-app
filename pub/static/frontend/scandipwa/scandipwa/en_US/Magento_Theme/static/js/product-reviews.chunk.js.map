{"version":3,"file":"static/js/product-reviews.chunk.js","sources":["/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviewItem/ProductReviewItem.component.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviewItem/index.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviewList/ProductReviewList.component.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviewList/index.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviews/ProductReviews.component.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviews/ProductReviews.container.js","/Users/mariasulezko/PhpStormProject/test/my-app/scandipwa/node_modules/@scandipwa/scandipwa/src/component/ProductReviews/index.js"],"sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { PureComponent } from 'react';\n\nimport ProductReviewRating from 'Component/ProductReviewRating';\nimport { ReviewItemType } from 'Type/Rating.type';\n\nimport './ProductReviewItem.style';\n\n/**\n * @class ProductReviewItem\n * @namespace Component/ProductReviewItem/Component\n */\nexport class ProductReviewItem extends PureComponent {\n    static propTypes = {\n        reviewItem: ReviewItemType.isRequired\n    };\n\n    getFormattedDate(created_at) {\n        // Safari bug\n        const fixedDate = created_at.replace(/-/g, '/');\n        const date = new Date(fixedDate);\n\n        return date ? date.toDateString() : created_at;\n    }\n\n    renderReviewListItemRating(ratingVoteItem, i) {\n        const {\n            rating_code,\n            percent\n        } = ratingVoteItem;\n\n        return (\n            <div\n              key={ i }\n              block=\"ProductReviewItem\"\n              elem=\"RatingSummaryItem\"\n              itemType=\"http://schema.org/Rating\"\n              itemScope\n              itemProp=\"reviewRating\"\n            >\n                <p itemProp=\"name\" block=\"ProductReviewItem\" elem=\"RatingItem\">{ rating_code }</p>\n                <meta itemProp=\"ratingValue\" content={ percent } />\n                <meta itemProp=\"worstRating\" content={ 0 } />\n                <meta itemProp=\"bestRating\" content={ 100 } />\n                <ProductReviewRating\n                  summary={ percent }\n                  code={ rating_code }\n                />\n            </div>\n        );\n    }\n\n    renderAuthor(reviewItem) {\n        const { nickname, created_at } = reviewItem;\n\n        return (\n            <p block=\"ProductReviewItem\" elem=\"ReviewAuthor\">\n                { __('Written by ') }\n                <strong itemProp=\"author\">{ nickname }</strong>\n                <meta itemProp=\"datePublished\" content={ this.getFormattedDate(created_at) } />\n                { __(', written at %s', this.getFormattedDate(created_at)) }\n            </p>\n        );\n    }\n\n    render() {\n        const {\n            reviewItem,\n            reviewItem: {\n                title,\n                detail,\n                rating_votes\n            }\n        } = this.props;\n\n        return (\n            <li\n              block=\"ProductReviewItem\"\n              itemType=\"http://schema.org/Review\"\n              itemProp=\"review\"\n              itemScope\n            >\n                <h4 block=\"ProductReviewItem\" elem=\"ReviewTitle\" itemProp=\"name\">\n                    { title }\n                </h4>\n                <div block=\"ProductReviewItem\" elem=\"RatingSummary\">\n                    { rating_votes.map(this.renderReviewListItemRating) }\n                </div>\n                <div block=\"ProductReviewItem\" elem=\"Content\">\n                    <p block=\"ProductReviewItem\" elem=\"ReviewDetails\" itemProp=\"reviewBody\">\n                        { detail }\n                    </p>\n                    { this.renderAuthor(reviewItem) }\n                </div>\n            </li>\n        );\n    }\n}\n\nexport default ProductReviewItem;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviewItem.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { PureComponent } from 'react';\n\nimport ProductReviewItem from 'Component/ProductReviewItem';\nimport { ProductType } from 'Type/ProductList.type';\n\nimport './ProductReviewList.style';\n\n/**\n * @class ProductReviewList\n * @namespace Component/ProductReviewList/Component\n */\nexport class ProductReviewList extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired\n    };\n\n    renderReviews() {\n        const { product: { reviews } } = this.props;\n\n        return reviews.map((reviewItem, i) => (\n            <ProductReviewItem\n              reviewItem={ reviewItem }\n              // eslint-disable-next-line react/no-array-index-key\n              key={ i }\n            />\n        ));\n    }\n\n    render() {\n        const { product } = this.props;\n        const hasReviews = product.reviews && Object.keys(product.reviews).length > 0;\n\n        if (!hasReviews) {\n            return null;\n        }\n\n        return (\n            <ul block=\"ProductReviewList\">\n                { this.renderReviews() }\n            </ul>\n        );\n    }\n}\n\nexport default ProductReviewList;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviewList.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ContentWrapper from 'Component/ContentWrapper';\nimport ExpandableContent from 'Component/ExpandableContent';\nimport ProductReviewList from 'Component/ProductReviewList';\nimport ProductReviewRating from 'Component/ProductReviewRating';\nimport { DeviceType } from 'Type/Device.type';\nimport { ProductType } from 'Type/ProductList.type';\nimport { showNewReviewPopup } from 'Util/Product';\n\nimport './ProductReviews.style';\n\n/** @namespace Component/ProductReviews/Component */\nexport class ProductReviews extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool.isRequired,\n        device: DeviceType.isRequired\n    };\n\n    renderButton() {\n        return (\n            <button\n              block=\"ProductReviews\"\n              elem=\"Button\"\n              mix={ { block: 'Button', mods: { isHollow: true } } }\n              onClick={ showNewReviewPopup }\n            >\n                { __('Write a review') }\n            </button>\n        );\n    }\n\n    renderNoRating() {\n        const { device: { isMobile } } = this.props;\n\n        if (isMobile) {\n            return (\n                <p>\n                    { __('There are no reviews yet! Click button below to submit one!') }\n                </p>\n            );\n        }\n\n        return (\n            <p>\n                { __('There are no reviews yet! Click button on the right to submit one!') }\n            </p>\n        );\n    }\n\n    renderRatingSchema(percent, reviewCount) {\n        return (\n            <>\n                <meta itemProp=\"ratingValue\" content={ percent } />\n                <meta itemProp=\"worstRating\" content={ 0 } />\n                <meta itemProp=\"bestRating\" content={ 100 } />\n                <meta itemProp=\"reviewCount\" content={ reviewCount } />\n            </>\n        );\n    }\n\n    renderRatingData() {\n        const {\n            product: {\n                review_summary: {\n                    rating_summary,\n                    review_count\n                } = {}\n            }\n        } = this.props;\n\n        const STARS_COUNT = 5;\n        const PERCENT = 100;\n\n        // eslint-disable-next-line no-mixed-operators\n        const percent = parseFloat(STARS_COUNT * (rating_summary || 0) / PERCENT).toFixed(2);\n\n        if (!review_count) {\n            return this.renderNoRating();\n        }\n\n        return (\n            <>\n                { this.renderRatingSchema(rating_summary, review_count) }\n                <ProductReviewRating\n                  mix={ { block: 'ProductReviews', elem: 'SummaryRating' } }\n                  summary={ rating_summary }\n                />\n                <p block=\"ProductReviews\" elem=\"SummaryDetails\">\n                    { percent }\n                    <span>{ __('%s reviews', review_count || 0) }</span>\n                </p>\n            </>\n        );\n    }\n\n    renderSummary() {\n        const {\n            product: {\n                review_summary: {\n                    review_count\n                } = {}\n            }\n        } = this.props;\n\n        return (\n            <div\n              block=\"ProductReviews\"\n              elem=\"Summary\"\n              itemType={ review_count ? 'http://schema.org/AggregateRating' : null }\n              itemProp={ review_count ? 'aggregateRating' : null }\n              itemScope={ review_count ? true : null }\n            >\n                { this.renderRatingData() }\n                { this.renderButton() }\n            </div>\n        );\n    }\n\n    renderList() {\n        const { product } = this.props;\n\n        return (\n            <ProductReviewList\n              product={ product }\n            />\n        );\n    }\n\n    render() {\n        const { areDetailsLoaded } = this.props;\n\n        const heading = areDetailsLoaded ? __('Reviews') : '';\n\n        return (\n            <ContentWrapper\n              label=\"Product reviews\"\n              mix={ { block: 'ProductReviews' } }\n              wrapperMix={ { block: 'ProductReviews', elem: 'Wrapper' } }\n            >\n                <ExpandableContent\n                  mix={ { block: 'ProductReviews', elem: 'Content' } }\n                  heading={ heading }\n                >\n                    { this.renderSummary() }\n                    { this.renderList() }\n                </ExpandableContent>\n            </ContentWrapper>\n        );\n    }\n}\n\nexport default ProductReviews;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { DeviceType } from 'Type/Device.type';\nimport { ProductType } from 'Type/ProductList.type';\n\nimport ProductReviews from './ProductReviews.component';\n\n/** @namespace Component/ProductReviews/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isEnabled: state.ConfigReducer.reviews_are_enabled,\n    isGuestEnabled: state.ConfigReducer.reviews_allow_guest,\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Component/ProductReviews/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    showInfoNotification: (message) => dispatch(showNotification('info', message))\n});\n\n/** @namespace Component/ProductReviews/Container */\nexport class ProductReviewsContainer extends PureComponent {\n    static propTypes = {\n        showInfoNotification: PropTypes.func.isRequired,\n        isGuestEnabled: PropTypes.bool,\n        isEnabled: PropTypes.bool,\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool,\n        device: DeviceType.isRequired\n    };\n\n    static defaultProps = {\n        isEnabled: true,\n        isGuestEnabled: true,\n        areDetailsLoaded: false\n    };\n\n    containerProps() {\n        const {\n            areDetailsLoaded,\n            device,\n            isEnabled,\n            product\n        } = this.props;\n\n        return {\n            areDetailsLoaded,\n            device,\n            isEnabled,\n            product\n        };\n    }\n\n    render() {\n        const { isEnabled } = this.props;\n\n        if (!isEnabled) {\n            return null;\n        }\n\n        return (\n            <ProductReviews\n              { ...this.containerProps() }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductReviewsContainer);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviews.container';\n"],"mappings":"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","sourceRoot":""}