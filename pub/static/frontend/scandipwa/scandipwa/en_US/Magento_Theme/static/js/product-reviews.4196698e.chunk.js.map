{"version":3,"sources":["../node_modules/@scandipwa/scandipwa/src/component/ProductReviews/index.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviews/ProductReviews.component.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviewList/index.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviewItem/index.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviews/ProductReviews.container.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviewList/ProductReviewList.component.js","../node_modules/@scandipwa/scandipwa/src/component/ProductReviewItem/ProductReviewItem.component.js"],"names":["block","elem","mix","mods","isHollow","onClick","showNewReviewPopup","__","isMobile","this","props","device","percent","reviewCount","itemProp","content","product","review_summary","rating_summary","review_count","parseFloat","toFixed","renderRatingSchema","summary","renderNoRating","itemType","itemScope","renderRatingData","renderButton","heading","areDetailsLoaded","label","wrapperMix","renderSummary","renderList","PureComponent","ProductReviews","mapStateToProps","state","isEnabled","ConfigReducer","reviews_are_enabled","isGuestEnabled","reviews_allow_guest","mapDispatchToProps","dispatch","showInfoNotification","message","showNotification","containerProps","containerFunctions","defaultProps","connect","ProductReviewsContainer","reviews","map","reviewItem","i","key","Object","keys","length","renderReviews","ProductReviewList","created_at","fixedDate","replace","date","Date","toDateString","ratingVoteItem","rating_code","code","nickname","getFormattedDate","title","detail","rating_votes","renderReviewListItemRating","renderAuthor","ProductReviewItem"],"mappings":"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","file":"static/js/product-reviews.4196698e.chunk.js","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviews.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ContentWrapper from 'Component/ContentWrapper';\nimport ExpandableContent from 'Component/ExpandableContent';\nimport ProductReviewList from 'Component/ProductReviewList';\nimport ProductReviewRating from 'Component/ProductReviewRating';\nimport { DeviceType } from 'Type/Device.type';\nimport { ProductType } from 'Type/ProductList.type';\nimport { showNewReviewPopup } from 'Util/Product';\n\nimport './ProductReviews.style';\n\n/** @namespace Component/ProductReviews/Component */\nexport class ProductReviews extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool.isRequired,\n        device: DeviceType.isRequired\n    };\n\n    renderButton() {\n        return (\n            <button\n              block=\"ProductReviews\"\n              elem=\"Button\"\n              mix={ { block: 'Button', mods: { isHollow: true } } }\n              onClick={ showNewReviewPopup }\n            >\n                { __('Write a review') }\n            </button>\n        );\n    }\n\n    renderNoRating() {\n        const { device: { isMobile } } = this.props;\n\n        if (isMobile) {\n            return (\n                <p>\n                    { __('There are no reviews yet! Click button below to submit one!') }\n                </p>\n            );\n        }\n\n        return (\n            <p>\n                { __('There are no reviews yet! Click button on the right to submit one!') }\n            </p>\n        );\n    }\n\n    renderRatingSchema(percent, reviewCount) {\n        return (\n            <>\n                <meta itemProp=\"ratingValue\" content={ percent } />\n                <meta itemProp=\"worstRating\" content={ 0 } />\n                <meta itemProp=\"bestRating\" content={ 100 } />\n                <meta itemProp=\"reviewCount\" content={ reviewCount } />\n            </>\n        );\n    }\n\n    renderRatingData() {\n        const {\n            product: {\n                review_summary: {\n                    rating_summary,\n                    review_count\n                } = {}\n            }\n        } = this.props;\n\n        const STARS_COUNT = 5;\n        const PERCENT = 100;\n\n        // eslint-disable-next-line no-mixed-operators\n        const percent = parseFloat(STARS_COUNT * (rating_summary || 0) / PERCENT).toFixed(2);\n\n        if (!review_count) {\n            return this.renderNoRating();\n        }\n\n        return (\n            <>\n                { this.renderRatingSchema(rating_summary, review_count) }\n                <ProductReviewRating\n                  mix={ { block: 'ProductReviews', elem: 'SummaryRating' } }\n                  summary={ rating_summary }\n                />\n                <p block=\"ProductReviews\" elem=\"SummaryDetails\">\n                    { percent }\n                    <span>{ __('%s reviews', review_count || 0) }</span>\n                </p>\n            </>\n        );\n    }\n\n    renderSummary() {\n        const {\n            product: {\n                review_summary: {\n                    review_count\n                } = {}\n            }\n        } = this.props;\n\n        return (\n            <div\n              block=\"ProductReviews\"\n              elem=\"Summary\"\n              itemType={ review_count ? 'http://schema.org/AggregateRating' : null }\n              itemProp={ review_count ? 'aggregateRating' : null }\n              itemScope={ review_count ? true : null }\n            >\n                { this.renderRatingData() }\n                { this.renderButton() }\n            </div>\n        );\n    }\n\n    renderList() {\n        const { product } = this.props;\n\n        return (\n            <ProductReviewList\n              product={ product }\n            />\n        );\n    }\n\n    render() {\n        const { areDetailsLoaded } = this.props;\n\n        const heading = areDetailsLoaded ? __('Reviews') : '';\n\n        return (\n            <ContentWrapper\n              label=\"Product reviews\"\n              mix={ { block: 'ProductReviews' } }\n              wrapperMix={ { block: 'ProductReviews', elem: 'Wrapper' } }\n            >\n                <ExpandableContent\n                  mix={ { block: 'ProductReviews', elem: 'Content' } }\n                  heading={ heading }\n                >\n                    { this.renderSummary() }\n                    { this.renderList() }\n                </ExpandableContent>\n            </ContentWrapper>\n        );\n    }\n}\n\nexport default ProductReviews;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviewList.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductReviewItem.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showNotification } from 'Store/Notification/Notification.action';\nimport { DeviceType } from 'Type/Device.type';\nimport { ProductType } from 'Type/ProductList.type';\n\nimport ProductReviews from './ProductReviews.component';\n\n/** @namespace Component/ProductReviews/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isEnabled: state.ConfigReducer.reviews_are_enabled,\n    isGuestEnabled: state.ConfigReducer.reviews_allow_guest,\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Component/ProductReviews/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    showInfoNotification: (message) => dispatch(showNotification('info', message))\n});\n\n/** @namespace Component/ProductReviews/Container */\nexport class ProductReviewsContainer extends PureComponent {\n    static propTypes = {\n        showInfoNotification: PropTypes.func.isRequired,\n        isGuestEnabled: PropTypes.bool,\n        isEnabled: PropTypes.bool,\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool,\n        device: DeviceType.isRequired\n    };\n\n    static defaultProps = {\n        isEnabled: true,\n        isGuestEnabled: true,\n        areDetailsLoaded: false\n    };\n\n    containerProps() {\n        const {\n            areDetailsLoaded,\n            device,\n            isEnabled,\n            product\n        } = this.props;\n\n        return {\n            areDetailsLoaded,\n            device,\n            isEnabled,\n            product\n        };\n    }\n\n    render() {\n        const { isEnabled } = this.props;\n\n        if (!isEnabled) {\n            return null;\n        }\n\n        return (\n            <ProductReviews\n              { ...this.containerProps() }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductReviewsContainer);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { PureComponent } from 'react';\n\nimport ProductReviewItem from 'Component/ProductReviewItem';\nimport { ProductType } from 'Type/ProductList.type';\n\nimport './ProductReviewList.style';\n\n/**\n * @class ProductReviewList\n * @namespace Component/ProductReviewList/Component\n */\nexport class ProductReviewList extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired\n    };\n\n    renderReviews() {\n        const { product: { reviews } } = this.props;\n\n        return reviews.map((reviewItem, i) => (\n            <ProductReviewItem\n              reviewItem={ reviewItem }\n              // eslint-disable-next-line react/no-array-index-key\n              key={ i }\n            />\n        ));\n    }\n\n    render() {\n        const { product } = this.props;\n        const hasReviews = product.reviews && Object.keys(product.reviews).length > 0;\n\n        if (!hasReviews) {\n            return null;\n        }\n\n        return (\n            <ul block=\"ProductReviewList\">\n                { this.renderReviews() }\n            </ul>\n        );\n    }\n}\n\nexport default ProductReviewList;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright © Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { PureComponent } from 'react';\n\nimport ProductReviewRating from 'Component/ProductReviewRating';\nimport { ReviewItemType } from 'Type/Rating.type';\n\nimport './ProductReviewItem.style';\n\n/**\n * @class ProductReviewItem\n * @namespace Component/ProductReviewItem/Component\n */\nexport class ProductReviewItem extends PureComponent {\n    static propTypes = {\n        reviewItem: ReviewItemType.isRequired\n    };\n\n    getFormattedDate(created_at) {\n        // Safari bug\n        const fixedDate = created_at.replace(/-/g, '/');\n        const date = new Date(fixedDate);\n\n        return date ? date.toDateString() : created_at;\n    }\n\n    renderReviewListItemRating(ratingVoteItem, i) {\n        const {\n            rating_code,\n            percent\n        } = ratingVoteItem;\n\n        return (\n            <div\n              key={ i }\n              block=\"ProductReviewItem\"\n              elem=\"RatingSummaryItem\"\n              itemType=\"http://schema.org/Rating\"\n              itemScope\n              itemProp=\"reviewRating\"\n            >\n                <p itemProp=\"name\" block=\"ProductReviewItem\" elem=\"RatingItem\">{ rating_code }</p>\n                <meta itemProp=\"ratingValue\" content={ percent } />\n                <meta itemProp=\"worstRating\" content={ 0 } />\n                <meta itemProp=\"bestRating\" content={ 100 } />\n                <ProductReviewRating\n                  summary={ percent }\n                  code={ rating_code }\n                />\n            </div>\n        );\n    }\n\n    renderAuthor(reviewItem) {\n        const { nickname, created_at } = reviewItem;\n\n        return (\n            <p block=\"ProductReviewItem\" elem=\"ReviewAuthor\">\n                { __('Written by ') }\n                <strong itemProp=\"author\">{ nickname }</strong>\n                <meta itemProp=\"datePublished\" content={ this.getFormattedDate(created_at) } />\n                { __(', written at %s', this.getFormattedDate(created_at)) }\n            </p>\n        );\n    }\n\n    render() {\n        const {\n            reviewItem,\n            reviewItem: {\n                title,\n                detail,\n                rating_votes\n            }\n        } = this.props;\n\n        return (\n            <li\n              block=\"ProductReviewItem\"\n              itemType=\"http://schema.org/Review\"\n              itemProp=\"review\"\n              itemScope\n            >\n                <h4 block=\"ProductReviewItem\" elem=\"ReviewTitle\" itemProp=\"name\">\n                    { title }\n                </h4>\n                <div block=\"ProductReviewItem\" elem=\"RatingSummary\">\n                    { rating_votes.map(this.renderReviewListItemRating) }\n                </div>\n                <div block=\"ProductReviewItem\" elem=\"Content\">\n                    <p block=\"ProductReviewItem\" elem=\"ReviewDetails\" itemProp=\"reviewBody\">\n                        { detail }\n                    </p>\n                    { this.renderAuthor(reviewItem) }\n                </div>\n            </li>\n        );\n    }\n}\n\nexport default ProductReviewItem;\n"],"sourceRoot":""}