{"version":3,"sources":["../node_modules/@scandipwa/scandipwa/src/component/ProductGallery/index.js","../node_modules/@scandipwa/scandipwa/src/component/ImageZoomPopup/index.js","../node_modules/@scandipwa/scandipwa/src/component/ImageZoomPopup/ImageZoomPopup.component.js","../node_modules/@scandipwa/scandipwa/src/component/TranslateOnCursorMove/index.js","../node_modules/@scandipwa/scandipwa/src/component/TranslateOnCursorMove/TranslateOnCursorMove.component.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGallery/ProductGallery.component.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScroll/index.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollArrow/index.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollArrow/CarouselScrollArrow.component.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollItem/index.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollItem/CarouselScrollItem.component.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryBaseImage/index.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryBaseImage/ProductGalleryBaseImage.component.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryBaseImage/ProductGalleryBaseImage.config.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryThumbnailImage/index.js","../node_modules/@scandipwa/scandipwa/src/component/VideoPopup/index.js","../node_modules/@scandipwa/scandipwa/src/component/VideoPopup/VideoPopup.component.js","../node_modules/@scandipwa/scandipwa/src/component/VideoThumbnail/index.js","../node_modules/@scandipwa/scandipwa/src/component/VideoThumbnail/VideoThumbnail.component.js","../node_modules/@scandipwa/scandipwa/src/component/Draggable/Draggable.component.js","../node_modules/@scandipwa/scandipwa/src/util/Media/Media.js","../node_modules/@scandipwa/scandipwa/src/component/Popup/index.js","../node_modules/@scandipwa/scandipwa/src/component/Draggable/index.js","../node_modules/@scandipwa/scandipwa/src/util/Media/index.js","../node_modules/@scandipwa/scandipwa/src/component/Slider/Slider.container.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGallery/ProductGallery.config.js","../node_modules/@scandipwa/scandipwa/src/component/Slider/index.js","../node_modules/@scandipwa/scandipwa/src/component/Slider/Slider.component.js","../node_modules/@scandipwa/scandipwa/src/component/Slider/Slider.config.js","../node_modules/@scandipwa/scandipwa/src/component/VideoPopup/VideoPopup.config.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGallery/ProductGallery.container.js","../node_modules/@scandipwa/scandipwa/src/component/ImageZoomPopup/ImageZoomPopup.container.js","../node_modules/@scandipwa/scandipwa/src/component/TranslateOnCursorMove/TranslateOnCursorMove.container.js","../node_modules/react-zoom-pan-pinch/dist/index.es.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScroll/CarouselScroll.component.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScroll/CarouselScroll.config.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollArrow/CarouselScrollArrow.container.js","../node_modules/@scandipwa/scandipwa/src/component/CarouselScrollItem/CarouselScrollItem.container.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryBaseImage/ProductGalleryBaseImage.container.js","../node_modules/@scandipwa/scandipwa/src/component/ProductGalleryThumbnailImage/ProductGalleryThumbnailImage.component.js","../node_modules/@scandipwa/scandipwa/src/component/VideoPopup/VideoPopup.container.js","../node_modules/@scandipwa/scandipwa/src/component/VideoThumbnail/VideoThumbnail.container.js"],"names":["this","props","children","activeImageId","block","itemSelector","targetSelector","PureComponent","ImageZoomPopup","ref","createRef","handleLoad","bind","handleMouseMove","window","addEventListener","prevProps","removeEventListener","CSS","setVariable","targets","current","querySelectorAll","target","querySelector","innerHeight","getBoundingClientRect","height","translate","style","transform","wrapperPageY","pageY","wrapperHeight","top","paddingY","isMobile","onLoad","onMouseMove","defaultProps","TranslateOnCursorMove","maxScale","MAX_ZOOM_SCALE","imageRef","galleryRef","state","scrollEnabled","slidesCount","prevZoom","handleSliderClick","calculateGallerySize","_calculateGallerySize","onWheel","context","renderSlide","updateSharedDestinationElement","productId","pathname","location","sliderRef","isImageZoomPopupActive","prevProductId","prevPathname","draggableRef","handleZoomChange","setTimeout","setState","width","Math","floor","ARROW_SAFE_AREA","CAROUSEL_ITEM_WIDTH","CAROUSEL_ITEM_GAP","handleImageZoomPopupActiveChange","gallery","activeImage","media_type","VIDEO_TYPE","registerSharedElementDestination","media","index","key","isVideoZoomed","onZoomedVideoClick","ratio","mix","elem","mods","isPlaceholder","timeout","zoomState","scale","stopScrolling","mediaData","isZoomEnabled","disableZoom","showLoader","base","baseSrc","url","large","largeSrc","src","showIsLoading","onZoomChange","onWheelStart","wheel","limitsOnWheel","disabled","pan","limitToWrapperBounds","velocity","options","limitToBounds","minScale","previousScale","resetTransform","setTransform","IMAGE_TYPE","renderImage","renderVideo","PLACEHOLDER_TYPE","renderPlaceholder","onActiveImageChange","isWithEmptySwitcher","length","activeItemId","onChange","showedItemCount","map","renderAdditionalPicture","thumbnail","isZoomInCursor","isMoreThanOnePhoto","itemProp","content","getImageUrl","showCounter","showArrows","isInteractionDisabled","onClick","sliderHeight","isHeightTransitionDisabledOnMount","renderSlider","renderAdditionalPictures","withRouter","ProductGallery","aria-label","noopFn","CarouselScrollArrow","isActive","itemRef","role","tabIndex","onKeyDown","CarouselScrollItem","alt","display","ProductGalleryBaseImage","TRANSFORMATION_DELAY","TRANSFORMATION_SPEED","INITIAL_SCALE","loadVimeoLibrary","loadYouTubeLibrary","Promise","all","vimeoPromise","youTubePromise","then","forceUpdate","cancel","videoId","Vimeo","vimeoComponent","autoplay","YouTube","youTubeComponent","containerClassName","className","opts","playerVars","makeCancelable","promise","vimeo","default","youTube","payload","video_content","video_url","VIMEO_FORMAT","exec","vimeoId","_renderVimeoVideo","YOUTUBE_FORMAT","youtubeId","_renderYoutubeVideo","id","VIDEO_POPUP_ID","_renderVideoContent","VideoPopup","__","video_title","onPlayClick","title","renderPlayIcon","VideoThumbnail","isDragging","originalX","translateX","lastTranslateX","originalY","translateY","lastTranslateY","handleTouchStart","handleMouseDown","handleTouchMove","handleClick","handleTouchEnd","handleMouseUp","handleDragEnd","touches","handleDragStart","event","preventDefault","clientX","clientY","shiftX","shiftY","onDrag","newState","onDragStart","onDragEnd","handleFocus","handleKey","onMouseDown","onTouchStart","onContextMenu","onFocus","callback","Draggable","PRODUCT_MEDIA","LOGO_MEDIA","subPath","isMediaPath","getStore","getState","ConfigReducer","secure_base_media_url","base_url","baseUrl","mapStateToProps","device","mapDispatchToProps","connect","forwardRef","Slider","THUMBNAIL_KEY","AMOUNT_OF_PLACEHOLDERS","PRODUCT_GALERY_POPUP_ID","sliderWidth","handleInteraction","handleDrag","renderCrumb","renderCounter","goNext","goPrev","prevActiveImage","addWindowResizeWatcher","getIsSlider","sliderChildren","offsetWidth","getSliderRef","setStyleVariablesOnMount","onload","offsetHeight","ANIMATION_DURATION","newTranslate","getSlideWidth","getDir","setAnimationSpeedStyle","abs","setTranlateXStyle","isVertical","isRtl","transitionSpeed","HEIGHT_TRANSITION_SPEED_ON_MOUNT","animationDuration","slideSize","lastTranslate","fullSliderSize","prevActiveSlider","fullSliderPoss","round","sliderPosition","mousePositionInElement","x","activeSlide","fullSliderWidth","scrollWidth","scrollHeight","getFullSliderWidth","dir","activeSlidePosition","activeSlidePercent","isSlideBack","onClickChangeSlide","ACTIVE_SLIDE_PERCENT","calculateNextSlide","e","type","args","call","changeActiveImage","nextImage","showCrumbs","Children","_","i","nextIsDisabled","prevIsDisabled","isPrev","isDisabled","direction","LEFT","isNext","RIGHT","renderSliderContent","renderCrumbs","renderArrows","RegExp","containerFunctions","handleImageZoomPopupClose","product","getBaseImage","prevProdId","cacheImages","media_gallery_entries","mediaGallery","areDetailsLoaded","prevMediaGallery","prevZoomEnabled","type_id","variants","PRODUCT_TYPE","configurable","urls","forEach","push","find","value","types","includes","position","returnValue","reduce","acc","item","sort","a","b","findIndex","thumbnailUrl","imageTypeUrl","name","filter","Array","fill","placeholders","label","getGalleryPictures","productName","_getProductName","document","documentElement","classList","remove","add","onClose","popupId","to","SharedTransitionContainer","containerProps","ProductGalleryContainer","dispatch","showPopup","hideActiveOverlay","prevIsActive","clickOutside","contentMix","onHide","ImageZoomPopupContainer","extendStatics","d","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","constructor","prototype","create","__assign","assign","t","s","n","arguments","apply","initialState","wrapperComponent","contentComponent","positionX","positionY","transformEnabled","minPositionX","maxPositionX","minPositionY","maxPositionY","limitToWrapper","centerContent","wrapperClass","contentClass","step","wheelEnabled","touchPadEnabled","panAnimationType","lockAxisX","lockAxisY","velocityEqualToMove","velocitySensitivity","velocityActiveScale","velocityMinSpeed","velocityBaseTime","velocityAnimationType","padding","paddingSize","panReturnAnimationTime","panReturnAnimationType","disableOnTarget","pinch","zoomIn","animation","animationType","animationTime","zoomOut","doubleClick","mode","reset","scalePadding","size","roundNumber","num","decimal","Number","toFixed","checkIsNumber","defaultValue","boundLimiter","minBound","maxBound","getDistance","firstPoint","secondPoint","sqrt","pow","pageX","deleteUndefinedProps","newObject","keys","undefined","handleCallback","handleWheelStop","previousEvent","stateProvider","_a","sign","deltaY","mergeProps","dynamicProps","curr","availableAnimations","easeOut","cos","PI","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","handleDisableAnimation","mounted","cancelAnimationFrame","animate","animationName","_this","startTime","Date","getTime","frameTime","requestAnimationFrame","animateComponent","targetState","speed","_b","scaleDiff","positionXDiff","positionYDiff","applyTransformation","checkZoomBounds","zoom","zoomPadding","enablePadding","minScaleWithPadding","isNaN","checkPositionBounds","bounds","paddingValue","paddingX","y","wheelMousePosition","contentRect","mouseX","left","mouseY","console","error","handleCalculatePositions","newScale","scaleDifference","newPositionX","newPositionY","getClientPosition","handlePanning","_c","startCoords","_d","positions","calculatedPosition","handlePaddingAnimation","handlePanningAnimation","handlePanToBounds","xChanged","yChanged","mousePosX","mousePosY","handleCalculateZoom","delta","disablePadding","getTarget","isBtnFunction","targetScale","innerWidth","wrapperToWindowScale","max","min","paddingEnabled","handleCalculateBounds","wrapperWidth","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","getComponentsSizes","diffWidth","diffHeight","scaleWidthFactor","scaleHeightFactor","calculateBoundingArea","handleWheelZoom","stopPropagation","customDelta","getDelta","ctrlKey","isLimitedToBounds","_e","handleZoomToPoint","mousePosition","handlePaddingAnimation$1","handleDoubleClick","resetTransformations","time","getButtonAnimationTime","handleZoomControls","customStep","isZoomIn","animationSpeed","defaultValues","defaultScale","defaultPositionX","defaultPositionY","number","checkIfInfinite","Infinity","calculatePinchZoom","currentDistance","pinchStartDistance","pinchStartScale","handleZoomPinch","cancelable","firstPointX","firstPointY","calculateMidpoint","getCurrentDistance","lastDistance","velocityTimeSpeed","handleEnableVelocity","startAnimation","handleFireVelocity","animateVelocity","velocityX","velocityY","targetX","targetY","newAnimationTime","maxTargetX","minTargetX","maxTargetY","minTargetY","startPosition","customReturnStep","returnAnimation","currentPositionX","getPosition","currentPositionY","calculateVelocityStart","now","lastMousePosition","position_1","distanceX","distanceY","interval","velocityTime","wrapperToWindowScaleX","wrapperToWindowScaleY","velocity_1","throttle","clearTimeout","isLocked","panReturnStep","offset","minTarget","maxTarget","newPosition","propsList","getValidPropsFromObject","Context","createContext","wheelStopEventTimer","wheelAnimationTimer","StateProvider","_super","dynamicValues","windowToWrapperScaleX","windowToWrapperScaleY","isDown","distance","offsetX","offsetY","previousWheelEvent","lastScale","maxBounds","handleWheel","onWheelStop","getCallbackProps","checkPanningTarget","tag","toUpperCase","tagName","element","checkIsPanningActive","handleSetUpPanning","onPanningStart","handleStartPanning","contains","onPanning","handleStopPanning","onPanningStop","handlePinchStart","onPinchingStart","handlePinch","onPinching","handlePinchStop","onPinchingStop","handleTouch","handleTouchStop","Error","handleDbClick","setScale","setPositionX","newPosX","setPositionY","newPosY","setDefaultState","setWrapperComponent","setContentComponent","WebkitTransform","startTime_1","interval_1","setInterval","clearInterval","posX","posY","componentDidMount","passiveOption","componentWillUnmount","componentDidUpdate","oldProps","oldState","wrapper","getWindowScaleY","render","loaded","Boolean","nodes","createElement","Provider","TransformWrapper","rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","styles","css","insertAt","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styleInject","TransformComponent","wrapperRef","contentRef","Component","contextType","firstCarouselItemId","carouselRef","handleArrowClick","handleChange","margin","getCarouselWidth","prevChildrenLength","prevShowedItemCount","childrenLength","prevActiveItemId","updateFirstSlide","handleReset","maxId","getMaxFirstItemId","setTranslate","cardWidth","nextId","multiplier","getNextTranslate","isNextArrow","prevFirstCarouselItemId","scrollStep","ceil","getNewCarouselItemId","newId","showArrow","isInvisible","child","renderContentItem","renderArrow","renderContent","CarouselScroll","CarouselScrollArrowContainer","CarouselScrollItemContainer","nextProps","nextScale","_getAlt","_getSrc","file","ProductGalleryBaseImageContainer","renderMedia","ProductGalleryThumbnailImage","PopupReducer","popupPayload","hideActivePopup","VideoThumbnailContainer"],"mappings":"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","file":"static/js/product-gallery.7b7fda38.chunk.js","sourcesContent":["/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductGallery.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ImageZoomPopup.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport TranslateOnCursorMove from 'Component/TranslateOnCursorMove';\nimport { ChildrenType } from 'Type/Common.type';\n\nimport './ImageZoomPopup.style';\n\n/** @namespace Component/ImageZoomPopup/Component */\nexport class ImageZoomPopup extends PureComponent {\n    static propTypes = {\n        children: ChildrenType.isRequired,\n        activeImageId: PropTypes.number.isRequired\n    };\n\n    render() {\n        const {\n            children,\n            activeImageId\n        } = this.props;\n\n        return (\n            <div block=\"ImageZoomPopup\">\n                <TranslateOnCursorMove\n                  activeImageId={ activeImageId }\n                  itemSelector=\".ProductGallery-SliderImage, .VideoThumbnail\"\n                  targetSelector=\".Image-Image\"\n                >\n                    { children }\n                </TranslateOnCursorMove>\n            </div>\n        );\n    }\n}\n\nexport default ImageZoomPopup;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport { default } from './TranslateOnCursorMove.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport { ChildrenType } from 'Type/Common.type';\nimport CSS from 'Util/CSS';\n\nimport './TranslateOnCursorMove.style';\n\n/** @namespace Component/TranslateOnCursorMove/Component */\nexport class TranslateOnCursorMove extends PureComponent {\n    static propTypes = {\n        children: ChildrenType.isRequired,\n        activeImageId: PropTypes.number.isRequired,\n        isMobile: PropTypes.bool.isRequired,\n        itemSelector: PropTypes.string.isRequired,\n        targetSelector: PropTypes.string.isRequired\n    };\n\n    static defaultProps = {};\n\n    ref = createRef();\n\n    handleLoad = this.handleLoad.bind(this);\n\n    handleMouseMove = this.handleMouseMove.bind(this);\n\n    componentDidMount() {\n        window.addEventListener('resize', this.handleLoad);\n    }\n\n    componentDidUpdate(prevProps) {\n        const { activeImageId } = this.props;\n        const { activeImageId: prevActiveImageId } = prevProps;\n\n        if (activeImageId !== prevActiveImageId) {\n            this.handleLoad();\n        }\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleLoad);\n        CSS.setVariable(this.ref, 'translateYOnCursorMove', '0');\n    }\n\n    handleLoad() {\n        const {\n            activeImageId,\n            itemSelector,\n            targetSelector\n        } = this.props;\n\n        const targets = this.ref.current.querySelectorAll(itemSelector);\n        const target = targets?.[activeImageId]?.querySelector(targetSelector);\n\n        if (!target) {\n            return;\n        }\n\n        const innerHeight = target.getBoundingClientRect().height;\n        const { height: wrapperHeight } = this.ref.current.getBoundingClientRect();\n        const translate = (wrapperHeight - innerHeight) / 2;\n\n        // style set directly (not via `setVariable`) as different translate Y values have to be applied at the same time\n        // (as 2 slider images are shown simultaneously when navigating to next/previous image)\n        target.style.transform = `translateY(${translate}px)`;\n        CSS.setVariable(this.ref, 'imageOpacity', '1');\n    }\n\n    handleMouseMove({ pageY: wrapperPageY }) {\n        const {\n            activeImageId,\n            itemSelector,\n            targetSelector\n        } = this.props;\n\n        // Space from top and bottom to shrink mouse move watch area\n        const paddingY = 90;\n\n        const target = this.ref.current\n            .querySelectorAll(itemSelector)?.[activeImageId]\n            ?.querySelector(targetSelector);\n\n        if (!target) {\n            return;\n        }\n\n        const innerHeight = target.getBoundingClientRect().height;\n        const { height: wrapperHeight, top } = this.ref.current.getBoundingClientRect();\n\n        const pageY = wrapperPageY - top;\n\n        // When mouse is reached top or bottom\n        if (wrapperPageY < paddingY + top || (wrapperPageY > (wrapperHeight + top - paddingY))) {\n            return;\n        }\n\n        const ratio = (innerHeight - wrapperHeight) / (wrapperHeight - (paddingY * 2));\n        const translate = (pageY - paddingY) * ratio;\n\n        if (innerHeight <= wrapperHeight) {\n            return;\n        }\n\n        target.style.transform = `translateY(-${translate}px)`;\n    }\n\n    render() {\n        const { children, isMobile } = this.props;\n\n        if (isMobile) {\n            return children;\n        }\n\n        return (\n            <div\n              block=\"TranslateOnCursorMove\"\n              onLoad={ this.handleLoad }\n              onMouseMove={ this.handleMouseMove }\n              ref={ this.ref }\n            >\n                { children }\n            </div>\n        );\n    }\n}\n\nexport default TranslateOnCursorMove;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport { withRouter } from 'react-router';\nimport { TransformWrapper } from 'react-zoom-pan-pinch';\n\nimport CarouselScroll from 'Component/CarouselScroll';\nimport {\n    ARROW_SAFE_AREA,\n    CAROUSEL_ITEM_GAP,\n    CAROUSEL_ITEM_WIDTH\n} from 'Component/CarouselScroll/CarouselScroll.config';\nimport Image from 'Component/Image';\nimport ProductGalleryBaseImage from 'Component/ProductGalleryBaseImage';\nimport ProductGalleryThumbnailImage from 'Component/ProductGalleryThumbnailImage';\nimport Slider from 'Component/Slider';\nimport VideoPopup from 'Component/VideoPopup';\nimport VideoThumbnail from 'Component/VideoThumbnail';\nimport { RefType } from 'Type/Common.type';\nimport { LocationType } from 'Type/Router.type';\nimport CSS from 'Util/CSS';\n\nimport {\n    IMAGE_TYPE,\n    MAX_ZOOM_SCALE,\n    PLACEHOLDER_TYPE,\n    VIDEO_TYPE\n} from './ProductGallery.config';\n\nimport './ProductGallery.style';\n\n/**\n * Product gallery\n * @class ProductGallery\n * @namespace Component/ProductGallery/Component\n */\nexport class ProductGallery extends PureComponent {\n    static propTypes = {\n        gallery: PropTypes.arrayOf(\n            PropTypes.shape({\n                id: PropTypes.oneOfType([\n                    PropTypes.number,\n                    PropTypes.string\n                ]),\n                image: PropTypes.string,\n                isPlaceholder: PropTypes.bool,\n                alt: PropTypes.string,\n                type: PropTypes.string,\n                media_type: PropTypes.string\n            })\n        ).isRequired,\n        productId: PropTypes.number,\n        isZoomEnabled: PropTypes.bool.isRequired,\n        activeImage: PropTypes.number.isRequired,\n        onActiveImageChange: PropTypes.func.isRequired,\n        handleZoomChange: PropTypes.func.isRequired,\n        registerSharedElementDestination: PropTypes.func.isRequired,\n        disableZoom: PropTypes.func.isRequired,\n        location: LocationType.isRequired,\n        sliderRef: RefType.isRequired,\n        handleImageZoomPopupActiveChange: PropTypes.func.isRequired,\n        isMobile: PropTypes.bool.isRequired,\n        isImageZoomPopupActive: PropTypes.bool.isRequired,\n        isWithEmptySwitcher: PropTypes.bool.isRequired,\n        showLoader: PropTypes.bool.isRequired\n    };\n\n    static defaultProps = {\n        productId: 0\n    };\n\n    maxScale = MAX_ZOOM_SCALE;\n\n    imageRef = createRef();\n\n    galleryRef = createRef();\n\n    state = {\n        scrollEnabled: true,\n        slidesCount: 7,\n        prevZoom: false\n    };\n\n    handleSliderClick = this.handleSliderClick.bind(this);\n\n    calculateGallerySize = this._calculateGallerySize.bind(this);\n\n    onWheel = this.onWheel.bind(this);\n\n    __construct(props, context) {\n        super.__construct(props, context);\n        this.renderSlide = this.renderSlide.bind(this);\n    }\n\n    componentDidMount() {\n        this.updateSharedDestinationElement();\n        window.addEventListener('resize', this.calculateGallerySize);\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            productId,\n            location: { pathname },\n            sliderRef,\n            isImageZoomPopupActive\n        } = this.props;\n\n        const {\n            productId: prevProductId,\n            location: { pathname: prevPathname }\n        } = prevProps;\n\n        const { prevZoom } = this.state;\n\n        if (productId !== prevProductId) {\n            this.updateSharedDestinationElement();\n        }\n\n        if (sliderRef?.current?.draggableRef && pathname !== prevPathname) {\n            CSS.setVariable(\n                sliderRef.current.draggableRef,\n                'animation-speed',\n                0\n            );\n        }\n\n        if (isImageZoomPopupActive !== prevZoom) {\n            this.handleZoomChange(isImageZoomPopupActive);\n        }\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.calculateGallerySize);\n    }\n\n    handleZoomChange(prevZoom) {\n        setTimeout(this.calculateGallerySize, 0);\n        this.setState({ prevZoom });\n    }\n\n    _calculateGallerySize() {\n        const { isMobile } = this.props;\n        const ref = this.galleryRef.current;\n\n        if (!ref || isMobile) {\n            return;\n        }\n        const { width } = ref.getBoundingClientRect();\n\n        const slidesCount = Math.floor((width - ARROW_SAFE_AREA * 2) / (CAROUSEL_ITEM_WIDTH + CAROUSEL_ITEM_GAP));\n\n        this.setState({ slidesCount });\n    }\n\n    handleSliderClick() {\n        const {\n            handleImageZoomPopupActiveChange,\n            gallery,\n            activeImage\n        } = this.props;\n\n        const { media_type } = gallery[activeImage];\n\n        if (media_type === VIDEO_TYPE) {\n            return;\n        }\n\n        handleImageZoomPopupActiveChange(true);\n    }\n\n    updateSharedDestinationElement() {\n        const { registerSharedElementDestination } = this.props;\n\n        registerSharedElementDestination(this.imageRef);\n    }\n\n    renderAdditionalPicture(media, index = 0) {\n        return (\n            <ProductGalleryThumbnailImage\n              key={ index }\n              media={ media }\n            />\n        );\n    }\n\n    /**\n     * Renders a video thumbnail which opens popup player on click/tap\n     * @param media\n     * @param index\n     * @returns {*}\n     * @private\n     */\n    renderVideo(media, index) {\n        const { isImageZoomPopupActive, handleImageZoomPopupActiveChange } = this.props;\n\n        return (\n            <VideoThumbnail\n              key={ index }\n              media={ media }\n              isVideoZoomed={ isImageZoomPopupActive }\n              onZoomedVideoClick={ handleImageZoomPopupActiveChange }\n            />\n        );\n    }\n\n    renderPlaceholder(index) {\n        return (\n            <Image\n              key={ index }\n              ratio=\"custom\"\n              mix={ {\n                  block: 'ProductGallery',\n                  elem: 'SliderImage',\n                  mods: { isPlaceholder: true }\n              } }\n              isPlaceholder\n            />\n        );\n    }\n\n    stopScrolling() {\n        this.setState({ scrollEnabled: false });\n        this.timeout = setTimeout(() => {\n            this.setState({ scrollEnabled: true });\n            this.timeout = null;\n\n            // 20 ms is time give to scroll down, usually that is enough\n            // eslint-disable-next-line no-magic-numbers\n        }, 20);\n    }\n\n    onWheel(zoomState) {\n        const { scale } = zoomState;\n\n        if (this.timeout) {\n            return;\n        }\n\n        if (scale === 1 || scale === MAX_ZOOM_SCALE) {\n            this.stopScrolling();\n        }\n    }\n\n    /**\n     * Renders a product image to be displayed in the gallery\n     * @param mediaData\n     * @param index\n     * @returns {*}\n     * @private\n     */\n    renderImage(mediaData, index) {\n        const {\n            isZoomEnabled,\n            handleZoomChange,\n            disableZoom,\n            isMobile,\n            isImageZoomPopupActive,\n            showLoader\n        } = this.props;\n        const { scrollEnabled } = this.state;\n\n        if (!isMobile) {\n            const {\n                base: { url: baseSrc } = {},\n                large: { url: largeSrc } = {}\n            } = mediaData;\n\n            const style = isImageZoomPopupActive ? { height: 'auto' } : {};\n            const src = isImageZoomPopupActive ? largeSrc || baseSrc : baseSrc;\n\n            return (\n                <Image\n                  key={ index }\n                  src={ src }\n                  ratio=\"custom\"\n                  mix={ {\n                      block: 'ProductGallery',\n                      elem: 'SliderImage',\n                      mods: { isPlaceholder: !src }\n                  } }\n                  isPlaceholder={ !src }\n                  style={ style }\n                  showIsLoading={ showLoader }\n                />\n            );\n        }\n\n        return (\n            <TransformWrapper\n              key={ index }\n              onZoomChange={ handleZoomChange }\n              onWheelStart={ this.onWheelStart }\n              onWheel={ this.onWheel }\n              wheel={ { limitsOnWheel: true, disabled: !scrollEnabled } }\n            //   doubleClick={ { mode: 'reset' } }\n              pan={ {\n                  disabled: !isZoomEnabled,\n                  limitToWrapperBounds: true,\n                  velocity: false\n              } }\n              options={ {\n                  limitToBounds: true,\n                  minScale: 1\n              } }\n            >\n                { ({\n                    scale,\n                    previousScale,\n                    resetTransform,\n                    setTransform\n                }) => {\n                    if (scale === 1 && previousScale !== 1) {\n                        resetTransform();\n                    }\n\n                    return (\n                        <ProductGalleryBaseImage\n                          setTransform={ setTransform }\n                          index={ index }\n                          mediaData={ mediaData }\n                          scale={ scale }\n                          previousScale={ previousScale }\n                          disableZoom={ disableZoom }\n                          isZoomEnabled={ isZoomEnabled }\n                        />\n                    );\n                } }\n            </TransformWrapper>\n        );\n    }\n\n    /**\n     * Checks for the type of the slide and renders it accordingly\n     * @param media\n     * @param index\n     * @returns {null|*}\n     */\n    renderSlide(media, index) {\n        const { media_type } = media;\n\n        switch (media_type) {\n        case IMAGE_TYPE:\n            return this.renderImage(media, index);\n        case VIDEO_TYPE:\n            return this.renderVideo(media, index);\n        case PLACEHOLDER_TYPE:\n            return this.renderPlaceholder(index);\n        default:\n            return null;\n        }\n    }\n\n    renderAdditionalPictures() {\n        const {\n            gallery,\n            isImageZoomPopupActive,\n            activeImage,\n            onActiveImageChange,\n            isWithEmptySwitcher\n        } = this.props;\n\n        const { slidesCount } = this.state;\n\n        if (gallery.length === 1) {\n            return <div block=\"ProductGallery\" elem=\"Additional\" mods={ { isWithEmptySwitcher } } />;\n        }\n\n        return (\n            <div block=\"ProductGallery\" elem=\"Additional\" mods={ { isImageZoomPopupActive } }>\n                <CarouselScroll\n                  activeItemId={ activeImage }\n                  onChange={ onActiveImageChange }\n                  showedItemCount={ slidesCount }\n                  isImageZoomPopupActive={ isImageZoomPopupActive }\n                >\n                    { gallery.map(this.renderAdditionalPicture.bind(this)) }\n                </CarouselScroll>\n            </div>\n        );\n    }\n\n    getImageUrl() {\n        const {\n            gallery: [\n                {\n                    thumbnail: {\n                        url = ''\n                    } = {}\n                }\n            ] = []\n        } = this.props;\n\n        return url;\n    }\n\n    renderSlider() {\n        const {\n            gallery,\n            activeImage,\n            isZoomEnabled,\n            onActiveImageChange,\n            isImageZoomPopupActive,\n            sliderRef,\n            isMobile\n        } = this.props;\n\n        const mods = {\n            isImageZoomPopupActive,\n            isZoomInCursor: !isImageZoomPopupActive\n        };\n\n        const isMoreThanOnePhoto = gallery.length > 1;\n\n        return (\n            <div\n              ref={ this.imageRef }\n              block=\"ProductGallery\"\n              elem=\"SliderWrapper\"\n            >\n                <meta itemProp=\"image\" content={ this.getImageUrl() } />\n                <Slider\n                  sliderRef={ sliderRef }\n                  mix={ { block: 'ProductGallery', elem: 'Slider', mods } }\n                  showCounter={ isMobile }\n                  showArrows={ !isMobile && isMoreThanOnePhoto }\n                  activeImage={ activeImage }\n                  onActiveImageChange={ onActiveImageChange }\n                  isInteractionDisabled={ isZoomEnabled }\n                  onClick={ this.handleSliderClick }\n                  sliderHeight={ isImageZoomPopupActive ? '100%' : 0 }\n                  isHeightTransitionDisabledOnMount\n                >\n                    { gallery.map(this.renderSlide) }\n                </Slider>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"ProductGallery\" ref={ this.galleryRef }>\n                { this.renderSlider() }\n                { this.renderAdditionalPictures() }\n                <VideoPopup />\n            </div>\n        );\n    }\n}\n\nexport default withRouter(ProductGallery);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport { default } from './CarouselScroll.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport { default } from './CarouselScrollArrow.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ChevronIcon from 'Component/ChevronIcon';\nimport { ModsType } from 'Type/Common.type';\nimport { noopFn } from 'Util/Common';\n\nimport './CarouselScrollArrow.style';\n\n/** @namespace Component/CarouselScrollArrow/Component */\nexport class CarouselScrollArrow extends PureComponent {\n    static propTypes = {\n        mods: ModsType,\n        onClick: PropTypes.func\n    };\n\n    static defaultProps = {\n        mods: {},\n        onClick: noopFn\n    };\n\n    render() {\n        const { mods, onClick } = this.props;\n\n        return (\n            <button\n              block=\"CarouselScrollArrow\"\n              mods={ mods }\n              onClick={ onClick }\n              aria-label=\"Arrow\"\n            >\n                <ChevronIcon />\n            </button>\n        );\n    }\n}\n\nexport default CarouselScrollArrow;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport { default } from './CarouselScrollItem.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ChildrenType, RefType } from 'Type/Common.type';\n\nimport './CarouselScrollItem.style';\n\n/** @namespace Component/CarouselScrollItem/Component */\nexport class CarouselScrollItem extends PureComponent {\n    static propTypes = {\n        isActive: PropTypes.bool.isRequired,\n        itemRef: RefType.isRequired,\n        onClick: PropTypes.func.isRequired,\n        children: ChildrenType.isRequired\n    };\n\n    render() {\n        const {\n            isActive,\n            itemRef,\n            onClick,\n            children\n        } = this.props;\n\n        return (\n            <div\n              role=\"button\"\n              tabIndex={ 0 }\n              block=\"CarouselScrollItem\"\n              mods={ { isActive } }\n              ref={ itemRef }\n              onClick={ onClick }\n              onKeyDown={ onClick }\n            >\n                { children }\n            </div>\n        );\n    }\n}\n\nexport default CarouselScrollItem;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport { default } from './ProductGalleryBaseImage.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { TransformComponent } from 'react-zoom-pan-pinch';\n\nimport Image from 'Component/Image';\n\n/** @namespace Component/ProductGalleryBaseImage/Component */\nexport class ProductGalleryBaseImage extends PureComponent {\n    static propTypes = {\n        src: PropTypes.string.isRequired,\n        alt: PropTypes.string.isRequired\n    };\n\n    render() {\n        const { src, alt } = this.props;\n\n        return (\n            <TransformComponent>\n                <Image\n                  src={ src }\n                  ratio=\"custom\"\n                  mix={ {\n                      block: 'ProductGallery',\n                      elem: 'SliderImage',\n                      mods: { isPlaceholder: !src }\n                  } }\n                  isPlaceholder={ !src }\n                  alt={ alt }\n                />\n                <img\n                  style={ { display: 'none' } }\n                  alt={ alt }\n                  src={ src }\n                  itemProp=\"image\"\n                />\n            </TransformComponent>\n        );\n    }\n}\n\nexport default ProductGalleryBaseImage;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport const TRANSFORMATION_DELAY = 0;\nexport const TRANSFORMATION_SPEED = 0;\nexport const INITIAL_SCALE = 1;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './ProductGalleryThumbnailImage.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './VideoPopup.container';\n","/* eslint-disable react/no-unused-state */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { PureComponent } from 'react';\n\nimport Popup from 'Component/Popup';\nimport { MediaItemType } from 'Type/ProductList.type';\nimport { makeCancelable } from 'Util/Promise';\n\nimport { VIDEO_POPUP_ID, VIMEO_FORMAT, YOUTUBE_FORMAT } from './VideoPopup.config';\n\nimport './VideoPopup.style';\n\n/**\n * A popup capable of displaying a video\n * @class VideoPopup\n * @namespace Component/VideoPopup/Component\n */\nexport class VideoPopup extends PureComponent {\n    static propTypes = {\n        payload: MediaItemType.isRequired\n    };\n\n    componentDidMount() {\n        this.loadVimeoLibrary();\n        this.loadYouTubeLibrary();\n\n        Promise.all([\n            this.vimeoPromise,\n            this.youTubePromise\n        ]).then(\n            /** @namespace Component/VideoPopup/Component/VideoPopup/componentDidMount/all/then */\n            () => this.forceUpdate()\n        );\n    }\n\n    componentWillUnmount() {\n        if (this.youTubePromise) {\n            this.youTubePromise.cancel();\n        }\n\n        if (this.vimeoPromise) {\n            this.vimeoPromise.cancel();\n        }\n    }\n\n    /**\n     * Renders a video provided by Vimeo\n     * @param videoId\n     * @returns {*}\n     * @private\n     */\n    _renderVimeoVideo(videoId) {\n        const Vimeo = this.vimeoComponent;\n\n        if (!Vimeo) {\n            return null;\n        }\n\n        return (\n            <Vimeo\n              videoId={ videoId }\n              autoplay\n            />\n        );\n    }\n\n    /**\n     * Renders a video provided by Youtube\n     * @param videoId\n     * @returns {*}\n     * @private\n     */\n    _renderYoutubeVideo(videoId) {\n        const YouTube = this.youTubeComponent;\n\n        if (!YouTube) {\n            return null;\n        }\n\n        return (\n            <YouTube\n              videoId={ videoId }\n              containerClassName=\"VideoPopup-YouTubeContainer\"\n              // eslint-disable-next-line react/forbid-component-props\n              className=\"VideoPopup-YouTube\"\n              opts={ { playerVars: { autoplay: 1 } } }\n            />\n        );\n    }\n\n    loadVimeoLibrary() {\n        this.vimeoPromise = makeCancelable(import('react-vimeo'));\n\n        this.vimeoPromise.promise.then(\n            /** @namespace Component/VideoPopup/Component/VideoPopup/loadVimeoLibrary/then */\n            ({ default: vimeo }) => {\n                this.vimeoComponent = vimeo;\n            }\n        );\n    }\n\n    loadYouTubeLibrary() {\n        this.youTubePromise = makeCancelable(import('react-youtube'));\n\n        this.youTubePromise.promise.then(\n            /** @namespace Component/VideoPopup/Component/VideoPopup/loadYouTubeLibrary/then */\n            ({ default: youTube }) => {\n                this.youTubeComponent = youTube;\n            }\n        );\n    }\n\n    /**\n     * Parses the video URL and renders the video accordingly\n     * @returns {null|*}\n     * @private\n     */\n    _renderVideoContent() {\n        const {\n            payload: {\n                media: {\n                    video_content: { video_url } = {}\n                } = {}\n            }\n        } = this.props;\n\n        if (!video_url) {\n            return null;\n        }\n\n        const [, vimeoId] = VIMEO_FORMAT.exec(video_url) || [];\n\n        if (vimeoId) {\n            return this._renderVimeoVideo(vimeoId);\n        }\n\n        const [, youtubeId] = YOUTUBE_FORMAT.exec(video_url);\n\n        if (youtubeId) {\n            return this._renderYoutubeVideo(youtubeId);\n        }\n\n        return null;\n    }\n\n    render() {\n        return (\n            <Popup id={ VIDEO_POPUP_ID } mix={ { block: 'VideoPopup' } }>\n                <div block=\"VideoPopup\" elem=\"VideoPlayer\">\n                    <div block=\"VideoPopup\" elem=\"PlayerContent\">\n                        { this._renderVideoContent() }\n                    </div>\n                </div>\n            </Popup>\n        );\n    }\n}\n\nexport default VideoPopup;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './VideoThumbnail.container';\n","/* eslint-disable react/no-unused-state */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Image from 'Component/Image/Image.container';\nimport { MediaItemType } from 'Type/ProductList.type';\n\nimport './VideoThumbnail.style';\n\n/**\n * VideoThumbnail component\n * @class VideoThumbnail\n * @namespace Component/VideoThumbnail/Component */\nexport class VideoThumbnail extends PureComponent {\n    static propTypes = {\n        media: MediaItemType.isRequired,\n        onPlayClick: PropTypes.func.isRequired\n    };\n\n    /**\n     * Renders an icon indicating that the video can be played\n     */\n    renderPlayIcon() {\n        return (\n            <span block=\"VideoThumbnail\" elem=\"PlayIcon\">\n                { __('Play video') }\n            </span>\n        );\n    }\n\n    render() {\n        const {\n            media: {\n                thumbnail: { url },\n                video_content: { video_title }\n            },\n            onPlayClick\n        } = this.props;\n\n        return (\n            <div block=\"VideoThumbnail\">\n                <button\n                  block=\"VideoThumbnail\"\n                  elem=\"Button\"\n                  onClick={ onPlayClick }\n                  title={ __('Play video %s', video_title) }\n                >\n                    <Image\n                      src={ url }\n                      ratio=\"custom\"\n                      mix={ {\n                          block: 'VideoThumbnail',\n                          elem: 'Thumbnail',\n                          mods: { isPlaceholder: !url }\n                      } }\n                      isPlaceholder={ !url }\n                      alt={ video_title }\n                    />\n                    { this.renderPlayIcon() }\n                </button>\n            </div>\n        );\n    }\n}\n\nexport default VideoThumbnail;\n","/* eslint-disable react/no-unused-state */\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ChildrenType, MixType, RefType } from 'Type/Common.type';\nimport { noopFn } from 'Util/Common';\n\nimport './Draggable.style';\n\n/** @namespace Component/Draggable/Component */\nexport class Draggable extends PureComponent {\n    static propTypes = {\n        shiftX: PropTypes.number,\n        shiftY: PropTypes.number,\n        onDragStart: PropTypes.func,\n        onClick: PropTypes.func,\n        onDragEnd: PropTypes.func,\n        handleFocus: PropTypes.func,\n        handleKey: PropTypes.func,\n        onDrag: PropTypes.func,\n        children: ChildrenType.isRequired,\n        mix: MixType,\n        draggableRef: RefType\n    };\n\n    static defaultProps = {\n        shiftX: 0,\n        shiftY: 0,\n        onDragStart: noopFn,\n        onDragEnd: (state, callback) => {\n            const { translateX, translateY } = state;\n\n            callback({\n                originalX: 0,\n                originalY: 0,\n                shiftX: translateX,\n                shiftY: translateY\n            });\n        },\n        onClick: noopFn,\n        onDrag: noopFn,\n        handleFocus: noopFn,\n        handleKey: noopFn,\n        draggableRef: noopFn,\n        mix: {}\n    };\n\n    state = {\n        isDragging: false,\n        originalX: 0,\n        translateX: 0,\n        lastTranslateX: 0,\n        originalY: 0,\n        translateY: 0,\n        lastTranslateY: 0\n    };\n\n    handleTouchStart = this.handleTouchStart.bind(this);\n\n    handleMouseDown = this.handleMouseDown.bind(this);\n\n    handleTouchMove = this.handleTouchMove.bind(this);\n\n    handleClick = this.handleClick.bind(this);\n\n    handleTouchEnd = this.handleTouchEnd.bind(this);\n\n    handleMouseUp = this.handleMouseUp.bind(this);\n\n    handleMouseMove = this.handleMouseMove.bind(this);\n\n    handleDragEnd = this.handleDragEnd.bind(this);\n\n    static getDerivedStateFromProps(props, state) {\n        const { shiftX, shiftY } = props;\n        const { lastTranslateX, lastTranslateY } = state;\n\n        if (shiftX !== lastTranslateX || shiftY !== lastTranslateY) {\n            return {\n                lastTranslateX: shiftX,\n                lastTranslateY: shiftY\n            };\n        }\n\n        return null;\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('mousemove', this.handleMouseMove);\n        window.removeEventListener('mouseup', this.handleMouseUp);\n        window.removeEventListener('touchmove', this.handleTouchMove);\n        window.removeEventListener('touchend', this.handleTouchEnd);\n    }\n\n    handleTouchStart({ touches }) {\n        window.addEventListener('touchmove', this.handleTouchMove);\n        window.addEventListener('touchend', this.handleTouchEnd);\n\n        if (touches.length === 1) {\n            this.handleDragStart(touches[0]);\n        }\n    }\n\n    handleMouseDown(event) {\n        window.addEventListener('mousemove', this.handleMouseMove);\n        window.addEventListener('mouseup', this.handleMouseUp);\n\n        event.preventDefault();\n        this.handleDragStart(event);\n    }\n\n    handleTouchMove({ touches }) {\n        if (touches.length === 1) {\n            this.handleMouseMove(touches[0]);\n        }\n    }\n\n    handleMouseMove({ clientX, clientY }) {\n        const { isDragging } = this.state;\n        const { shiftX, shiftY } = this.props;\n\n        if (!isDragging) {\n            return;\n        }\n\n        this.setState(({\n            originalX,\n            originalY\n        }) => ({\n            translateX: clientX - originalX + shiftX,\n            translateY: clientY - originalY + shiftY\n        }), () => {\n            const { onDrag } = this.props;\n\n            if (onDrag) {\n                onDrag({ ...this.state, clientX, clientY });\n            }\n        });\n    }\n\n    handleTouchEnd() {\n        window.removeEventListener('touchmove', this.handleTouchMove);\n        window.removeEventListener('touchend', this.handleTouchEnd);\n\n        this.handleDragEnd();\n    }\n\n    handleMouseUp() {\n        window.removeEventListener('mousemove', this.handleMouseMove);\n        window.removeEventListener('mouseup', this.handleMouseUp);\n\n        this.handleDragEnd();\n    }\n\n    handleClick(event) {\n        const { onClick } = this.props;\n\n        if (onClick) {\n            onClick(\n                this.state,\n                (newState) => this.setState({\n                    ...newState,\n                    isDragging: false,\n                    translateX: 0,\n                    translateY: 0\n                }),\n                event\n            );\n        }\n    }\n\n    handleDragStart({\n        clientX,\n        clientY\n    }) {\n        const { onDragStart } = this.props;\n\n        if (onDragStart) {\n            onDragStart();\n        }\n\n        this.setState({\n            originalX: clientX,\n            originalY: clientY,\n            isDragging: true\n        });\n    }\n\n    handleDragEnd() {\n        const { onDragEnd } = this.props;\n\n        onDragEnd(this.state, (newState) => this.setState({\n            ...newState,\n            isDragging: false,\n            translateX: 0,\n            translateY: 0\n        }));\n\n        // TO STAY WHERE RELEASED\n        // originalX: 0,\n        // lastTranslateX: translateX,\n        // originalY: 0,\n        // lastTranslateY: translateY,\n\n        // TO RETURN INTO INITIAL\n        // originalX: 0,\n        // lastTranslateX: 0\n        // originalY: 0,\n        // lastTranslateY: 0\n    }\n\n    render() {\n        const {\n            children,\n            handleFocus,\n            handleKey,\n            draggableRef,\n            mix\n        } = this.props;\n\n        return (\n            <div\n              block=\"Draggable\"\n              mix={ mix }\n              ref={ draggableRef }\n              onMouseDown={ this.handleMouseDown }\n              onTouchStart={ this.handleTouchStart }\n              onClick={ this.handleClick }\n              onContextMenu={ this.handleClick }\n              onKeyDown={ handleKey }\n              onFocus={ handleFocus }\n              tabIndex={ 0 }\n              role=\"button\"\n              aria-label=\"Draggable area\"\n            >\n                { children }\n            </div>\n        );\n    }\n}\n\nexport default Draggable;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport getStore from 'Util/Store';\n\nexport const WYSIWYG_MEDIA = 'wysiwyg/';\nexport const CATEGORY_MEDIA = 'catalog/category/';\nexport const PRODUCT_MEDIA = 'catalog/product';\nexport const LOGO_MEDIA = 'logo/';\n\nexport default (src, subPath = '', isMediaPath = true) => {\n    // If isMediaPath is passed return local media path\n\n    const { ConfigReducer: { secure_base_media_url, base_url } } = getStore().getState();\n    const baseUrl = isMediaPath\n        ? secure_base_media_url || '/media/'\n        : base_url;\n\n    return `${ baseUrl }${ subPath }${ src }`;\n};\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './Popup.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './Draggable.component';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nexport {\n    default, WYSIWYG_MEDIA, PRODUCT_MEDIA, CATEGORY_MEDIA\n} from './Media';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { connect } from 'react-redux';\n\nimport Slider from './Slider.component';\n\n/** @namespace Component/Slider/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    device: state.ConfigReducer.device\n});\n\n/** @namespace Component/Slider/Container/mapDispatchToProps */\nexport const mapDispatchToProps = () => ({});\n\n// eslint-disable-next-line @scandipwa/scandipwa-guidelines/always-both-mappings\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Slider);\n","/* eslint-disable import/prefer-default-export */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport const MAX_ZOOM_SCALE = 8;\n\nexport const IMAGE_TYPE = 'image';\nexport const VIDEO_TYPE = 'external-video';\nexport const PLACEHOLDER_TYPE = 'placeholder';\n\nexport const THUMBNAIL_KEY = 'small_image';\nexport const AMOUNT_OF_PLACEHOLDERS = 0;\n\nexport const PRODUCT_GALERY_POPUP_ID = 'ProductGalleryPopup';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport { default } from './Slider.container';\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { Children, createRef, PureComponent } from 'react';\n\nimport ChevronIcon from 'Component/ChevronIcon';\nimport { LEFT, RIGHT } from 'Component/ChevronIcon/ChevronIcon.config';\nimport Draggable from 'Component/Draggable';\nimport { ChildrenType, MixType, RefType } from 'Type/Common.type';\nimport { DeviceType } from 'Type/Device.type';\nimport { noopFn } from 'Util/Common';\nimport CSS from 'Util/CSS';\nimport { isRtl } from 'Util/CSS/CSS';\n\nimport {\n    ACTIVE_SLIDE_PERCENT,\n    ANIMATION_DURATION,\n    HEIGHT_TRANSITION_SPEED_ON_MOUNT\n} from './Slider.config';\n\nimport './Slider.style';\n\n/**\n * Slider component\n * @class Slider\n * @namespace Component/Slider/Component\n */\nexport class Slider extends PureComponent {\n    static propTypes = {\n        showCrumbs: PropTypes.bool,\n        showArrows: PropTypes.bool,\n        showCounter: PropTypes.bool,\n        activeImage: PropTypes.number,\n        onActiveImageChange: PropTypes.func,\n        mix: MixType,\n        children: ChildrenType.isRequired,\n        isInteractionDisabled: PropTypes.bool,\n        device: DeviceType.isRequired,\n        onClick: PropTypes.func,\n        isVertical: PropTypes.bool,\n        isHeightTransitionDisabledOnMount: PropTypes.bool,\n        sliderHeight: PropTypes.oneOfType([\n            PropTypes.number,\n            PropTypes.string\n        ]),\n        sliderRef: RefType\n    };\n\n    static defaultProps = {\n        activeImage: 0,\n        onActiveImageChange: noopFn,\n        showCrumbs: false,\n        showArrows: false,\n        showCounter: false,\n        isInteractionDisabled: false,\n        mix: {},\n        onClick: null,\n        isVertical: false,\n        isHeightTransitionDisabledOnMount: false,\n        sliderHeight: null,\n        sliderRef: null\n    };\n\n    sliderWidth = 0;\n\n    draggableRef = createRef();\n\n    sliderRef = createRef();\n\n    handleDragStart = this.handleInteraction.bind(this, this.handleDragStart);\n\n    handleDrag = this.handleInteraction.bind(this, this.handleDrag);\n\n    handleDragEnd = this.handleInteraction.bind(this, this.handleDragEnd);\n\n    renderCrumb = this.renderCrumb.bind(this);\n\n    renderCounter = this.renderCounter.bind(this);\n\n    goNext = this.goNext.bind(this);\n\n    goPrev = this.goPrev.bind(this);\n\n    handleClick = this.handleClick.bind(this);\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { activeImage } = this.props;\n\n        this.state = {\n            prevActiveImage: activeImage\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { activeImage, children } = props;\n        const { prevActiveImage } = state;\n\n        if (prevActiveImage !== activeImage && children.length !== 1) {\n            return { prevActiveImage: activeImage };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        this.addWindowResizeWatcher();\n\n        if (!this.getIsSlider()) {\n            return;\n        }\n\n        const sliderChildren = this.draggableRef.current.children;\n        const sliderWidth = this.draggableRef.current.offsetWidth;\n\n        this.sliderWidth = sliderWidth;\n\n        if (!sliderChildren || !sliderChildren[0]) {\n            return;\n        }\n\n        const sliderRef = this.getSliderRef();\n\n        CSS.setVariable(sliderRef, 'sliderOpacity', '0');\n\n        // delay setting carousel translate to avoid wrong calculations be made during transition\n        setTimeout(() => {\n            this.setStyleVariablesOnMount();\n        }, 0);\n\n        const target = sliderChildren[0].querySelector('img') || sliderChildren[0];\n\n        target.onload = () => {\n            const height = target.offsetHeight;\n            const sliderHeight = `${ height }px`;\n\n            CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n        };\n\n        setTimeout(() => {\n            const height = target.offsetHeight;\n            const sliderHeight = `${ height }px`;\n\n            if (height !== 0) {\n                CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n            }\n        }, ANIMATION_DURATION);\n\n        setTimeout(() => CSS.setVariable(sliderRef, 'sliderOpacity', '1'), 0);\n    }\n\n    componentDidUpdate(prevProps) {\n        const { activeImage: prevActiveImage } = prevProps;\n        const { activeImage } = this.props;\n\n        if (activeImage !== prevActiveImage && this.getIsSlider()) {\n            const newTranslate = -activeImage * this.getSlideWidth() * this.getDir();\n\n            this.setAnimationSpeedStyle(Math.abs((prevActiveImage - activeImage) * ANIMATION_DURATION));\n            this.setTranlateXStyle(newTranslate);\n        }\n    }\n\n    getDir() {\n        const { isVertical } = this.props;\n\n        if (!isVertical && isRtl()) {\n            return -1;\n        }\n\n        return 1;\n    }\n\n    addWindowResizeWatcher() {\n        window.addEventListener('resize', () => {\n            const { activeImage } = this.props;\n            const newTranslate = -activeImage * this.getSlideWidth() * this.getDir();\n\n            this.setTranlateXStyle(newTranslate);\n\n            // Removed animation to avoid image movement while changing window width.\n            this.setAnimationSpeedStyle(0);\n\n            const delay = 500;\n\n            setTimeout(() => {\n                this.setAnimationSpeedStyle();\n            }, delay);\n        });\n    }\n\n    setStyleVariablesOnMount() {\n        const { sliderHeight, isHeightTransitionDisabledOnMount, activeImage } = this.props;\n\n        const sliderRef = this.getSliderRef();\n\n        if (isHeightTransitionDisabledOnMount) {\n            const transitionSpeed = isHeightTransitionDisabledOnMount\n                ? 0\n                : `${ HEIGHT_TRANSITION_SPEED_ON_MOUNT }ms`;\n\n            CSS.setVariable(\n                sliderRef,\n                'height-transition-speed',\n                transitionSpeed\n            );\n        }\n\n        if (sliderHeight) {\n            CSS.setVariable(sliderRef, 'slider-height', sliderHeight);\n        }\n\n        const newTranslate = -activeImage * this.getSlideWidth() * this.getDir();\n\n        this.setTranlateXStyle(newTranslate);\n    }\n\n    setTranlateXStyle(translate) {\n        const { isVertical } = this.props;\n\n        CSS.setVariable(\n            this.draggableRef,\n            isVertical ? 'translateY' : 'translateX',\n            `${ translate }px`\n        );\n    }\n\n    setAnimationSpeedStyle(animationDuration = ANIMATION_DURATION) {\n        CSS.setVariable(this.draggableRef, 'animation-speed', `${ animationDuration }ms`);\n    }\n\n    getIsSlider() {\n        const { children } = this.props;\n\n        return children.length > 0;\n    }\n\n    getSlideWidth() {\n        const { isVertical } = this.props;\n        const { offsetWidth = 0, offsetHeight = 0 } = this.draggableRef.current || {};\n\n        return isVertical ? offsetHeight : offsetWidth;\n    }\n\n    getSliderRef() {\n        const { sliderRef } = this.props;\n\n        return sliderRef || this.sliderRef;\n    }\n\n    onClickChangeSlide(state, slideSize, lastTranslate, fullSliderSize) {\n        const { originalX } = state;\n        const { prevActiveImage: prevActiveSlider } = this.state;\n        const { onActiveImageChange, device, onClick } = this.props;\n\n        if (onClick) {\n            onClick();\n\n            return -prevActiveSlider;\n        }\n\n        const fullSliderPoss = Math.round(fullSliderSize / slideSize);\n        const elementPositionInDOM = this.draggableRef.current.getBoundingClientRect().x;\n\n        const sliderPosition = -prevActiveSlider;\n        const realElementPositionInDOM = elementPositionInDOM - lastTranslate;\n        const mousePositionInElement = originalX - realElementPositionInDOM;\n\n        if (device.isMobile) {\n            return sliderPosition;\n        }\n\n        if (slideSize / 2 < mousePositionInElement && -fullSliderPoss < sliderPosition) {\n            const activeSlide = sliderPosition - 1;\n\n            onActiveImageChange(-activeSlide);\n\n            return activeSlide;\n        }\n\n        if (slideSize / 2 > mousePositionInElement && lastTranslate) {\n            const activeSlide = sliderPosition + 1;\n\n            onActiveImageChange(-activeSlide);\n\n            return activeSlide;\n        }\n\n        return sliderPosition;\n    }\n\n    getFullSliderWidth() {\n        const { isVertical } = this.props;\n        const { scrollWidth: fullSliderWidth, scrollHeight } = this.draggableRef.current;\n\n        const width = isVertical ? scrollHeight : fullSliderWidth;\n\n        return width - this.getSlideWidth();\n    }\n\n    calculateNextSlide(state) {\n        const { isVertical } = this.props;\n        const {\n            translateX,\n            translateY,\n            lastTranslateX,\n            lastTranslateY\n        } = state;\n\n        const lastTranslate = isVertical ? lastTranslateY : lastTranslateX;\n        const translate = isVertical ? translateY : translateX;\n\n        const { onActiveImageChange } = this.props;\n\n        const slideSize = this.getSlideWidth();\n\n        const fullSliderSize = this.getFullSliderWidth();\n\n        const dir = this.getDir();\n        const activeSlidePosition = translate / slideSize;\n        const activeSlidePercent = Math.abs(activeSlidePosition % 1);\n        const isSlideBack = dir === 1 ? translate > lastTranslate : translate < lastTranslate;\n\n        if (!translate) {\n            return this.onClickChangeSlide(state, slideSize, lastTranslate, fullSliderSize);\n        }\n\n        if ((dir === 1 && translate >= 0) || (dir === -1 && translate < 0)) {\n            onActiveImageChange(0);\n\n            return 0;\n        }\n\n        if ((dir === 1 && translate < -fullSliderSize) || (dir === -1 && translate > fullSliderSize)) {\n            const activeSlide = Math.round(fullSliderSize / (-slideSize * dir));\n\n            onActiveImageChange(-activeSlide);\n\n            return activeSlide;\n        }\n\n        if (isSlideBack && activeSlidePercent < 1 - ACTIVE_SLIDE_PERCENT) {\n            const activeSlide = Math[dir === 1 ? 'ceil' : 'floor'](activeSlidePosition);\n\n            onActiveImageChange(-activeSlide);\n\n            return activeSlide;\n        }\n\n        if (!isSlideBack && activeSlidePercent > ACTIVE_SLIDE_PERCENT) {\n            const activeSlide = Math[dir === 1 ? 'floor' : 'ceil'](activeSlidePosition);\n\n            onActiveImageChange(-activeSlide);\n\n            return activeSlide;\n        }\n\n        const activeSlide = Math.round(activeSlidePosition);\n\n        onActiveImageChange(-activeSlide);\n\n        return activeSlide;\n    }\n\n    handleDragStart() {\n        this.setAnimationSpeedStyle(0);\n    }\n\n    handleDrag(state) {\n        const { isVertical } = this.props;\n        const { translateX, translateY } = state;\n        const translate = isVertical ? translateY : translateX;\n        const fullSliderSize = this.getFullSliderWidth();\n        const dir = this.getDir();\n        const canDrag = dir === 1\n            ? translate < 0 && translate > -fullSliderSize\n            : translate > 0 && translate < fullSliderSize;\n\n        if (canDrag) {\n            this.setTranlateXStyle(translate);\n        }\n    }\n\n    handleDragEnd(state, callback) {\n        const { isVertical } = this.props;\n        const activeSlide = this.calculateNextSlide(state);\n        const slideSize = this.getSlideWidth();\n        const newTranslate = activeSlide * slideSize;\n\n        this.setAnimationSpeedStyle();\n        this.setTranlateXStyle(newTranslate);\n\n        if (isVertical) {\n            callback({\n                originalY: newTranslate,\n                lastTranslateY: newTranslate\n            });\n\n            return;\n        }\n\n        callback({\n            originalX: newTranslate,\n            lastTranslateX: newTranslate\n        });\n    }\n\n    handleClick(state, callback, e) {\n        if (e.type === 'contextmenu') {\n            this.handleDragEnd(state, callback);\n        }\n    }\n\n    handleInteraction(callback, ...args) {\n        const { isInteractionDisabled } = this.props;\n\n        if (isInteractionDisabled || !callback) {\n            return;\n        }\n\n        callback.call(this, ...args);\n    }\n\n    changeActiveImage(activeImage) {\n        const { onActiveImageChange } = this.props;\n\n        onActiveImageChange(activeImage);\n    }\n\n    goPrev() {\n        const { activeImage } = this.props;\n\n        if (activeImage > 0) {\n            this.changeActiveImage(activeImage - 1);\n        }\n    }\n\n    goNext() {\n        const { activeImage, children } = this.props;\n        const nextImage = activeImage + 1;\n\n        if (nextImage < children.length) {\n            this.changeActiveImage(nextImage);\n        }\n    }\n\n    renderCounter() {\n        const { children, showCounter, activeImage } = this.props;\n\n        if (!showCounter || children.length <= 1) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"Slider\"\n              elem=\"Counter\"\n            >\n                { activeImage + 1 }\n                /\n                { children.length }\n            </div>\n        );\n    }\n\n    renderCrumbs() {\n        const { children, showCrumbs } = this.props;\n\n        if (!showCrumbs || children.length <= 1) {\n            return null;\n        }\n\n        return (\n            <div\n              block=\"Slider\"\n              elem=\"Crumbs\"\n            >\n                { Children.map(children, this.renderCrumb) }\n            </div>\n        );\n    }\n\n    renderCrumb(_, i) {\n        const { activeImage } = this.props;\n        const isActive = i === Math.abs(-activeImage);\n\n        return (\n            <button\n              block=\"Slider\"\n              elem=\"Image\"\n              mods={ { type: 'single' } }\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={ () => this.changeActiveImage(i) }\n              aria-label={ __('Slide crumb') }\n            >\n                <div\n                  block=\"Slider\"\n                  elem=\"Crumb\"\n                  mods={ { isActive } }\n                />\n            </button>\n        );\n    }\n\n    renderArrows() {\n        const { showArrows, activeImage, children } = this.props;\n        const nextIsDisabled = activeImage + 1 === children.length;\n        const prevIsDisabled = activeImage === 0;\n\n        if (!showArrows) {\n            return null;\n        }\n\n        return (\n            <>\n                <button\n                  block=\"Slider\"\n                  elem=\"Arrow\"\n                  mods={ { isPrev: true, isDisabled: prevIsDisabled } }\n                  aria-label={ __('Previous') }\n                  onClick={ this.goPrev }\n                >\n                    <ChevronIcon direction={ LEFT } />\n                </button>\n                <button\n                  block=\"Slider\"\n                  elem=\"Arrow\"\n                  mods={ { isNext: true, isDisabled: nextIsDisabled } }\n                  aria-label={ __('Next') }\n                  onClick={ this.goNext }\n                >\n                    <ChevronIcon direction={ RIGHT } />\n                </button>\n            </>\n        );\n    }\n\n    renderSliderContent() {\n        const { activeImage, children, isVertical } = this.props;\n        const dir = this.getDir();\n\n        if (!this.getIsSlider()) {\n            return children;\n        }\n\n        return (\n            <Draggable\n              mix={ { block: 'Slider', elem: 'Wrapper', mods: { isVertical } } }\n              draggableRef={ this.draggableRef }\n              onDragStart={ this.handleDragStart }\n              onDragEnd={ this.handleDragEnd }\n              onDrag={ this.handleDrag }\n              onClick={ this.handleClick }\n              shiftX={ -activeImage * this.getSlideWidth() * dir }\n              shiftY={ -activeImage * this.getSlideWidth() }\n            >\n                { children }\n            </Draggable>\n        );\n    }\n\n    render() {\n        const { mix } = this.props;\n\n        return (\n            <>\n                <div\n                  block=\"Slider\"\n                  mix={ mix }\n                  ref={ this.getSliderRef() }\n                >\n                    { this.renderSliderContent() }\n                    { this.renderCrumbs() }\n                    { this.renderCounter() }\n                </div>\n                { this.renderArrows() }\n            </>\n        );\n    }\n}\n\nexport default Slider;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport const ANIMATION_DURATION = 300;\nexport const HEIGHT_TRANSITION_SPEED_ON_MOUNT = 300;\nexport const ACTIVE_SLIDE_PERCENT = 0.1;\n","/* eslint-disable import/prefer-default-export */\n\n/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport const VIDEO_POPUP_ID = 'VIDEO_POPUP_ID';\n\n/**\n * An expression that checks for vimeo URLs described in https://developer.vimeo.com/api/oembed/videos#table-1 and matches the video id\n * @type {RegExp}\n */\nexport const VIMEO_FORMAT = new RegExp('(?:https?//)?vimeo.com[\\\\w/]*/(\\\\d+)$');\nexport const YOUTUBE_FORMAT = new RegExp('(?:https?//)?www.youtube.com/watch\\\\?v=([\\\\w\\\\-]+)');\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Subscribe } from 'unstated';\n\nimport ImageZoomPopup from 'Component/ImageZoomPopup';\nimport PRODUCT_TYPE from 'Component/Product/Product.config';\nimport SharedTransitionContainer from 'Component/SharedTransition/SharedTransition.unstated';\nimport { ProductType } from 'Type/ProductList.type';\nimport { cacheImages } from 'Util/Cache/Cache';\n\nimport ProductGallery from './ProductGallery.component';\nimport {\n    AMOUNT_OF_PLACEHOLDERS,\n    IMAGE_TYPE,\n    PRODUCT_GALERY_POPUP_ID,\n    THUMBNAIL_KEY\n} from './ProductGallery.config';\n\n/** @namespace Component/ProductGallery/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/ProductGallery/Container/mapDispatchToProps */\nexport const mapDispatchToProps = () => ({});\n\n/** @namespace Component/ProductGallery/Container */\nexport class ProductGalleryContainer extends PureComponent {\n    static propTypes = {\n        product: ProductType.isRequired,\n        areDetailsLoaded: PropTypes.bool,\n        isMobile: PropTypes.bool.isRequired,\n        isZoomEnabled: PropTypes.bool,\n        showLoader: PropTypes.bool,\n\n        // Renders empty image switcher, so that when changing active product, transaction\n        // between images is not jumping, when parent has multiple images, but child only one\n        isWithEmptySwitcher: PropTypes.bool\n    };\n\n    static defaultProps = {\n        areDetailsLoaded: false,\n        isZoomEnabled: false,\n        isWithEmptySwitcher: false,\n        showLoader: false\n    };\n\n    sliderRef = createRef();\n\n    containerFunctions = {\n        onActiveImageChange: this.onActiveImageChange.bind(this),\n        handleZoomChange: this.handleZoomChange.bind(this),\n        disableZoom: this.disableZoom.bind(this),\n        handleImageZoomPopupActiveChange: this.handleImageZoomPopupActiveChange.bind(this)\n    };\n\n    handleImageZoomPopupClose = this.handleImageZoomPopupClose.bind(this);\n\n    __construct(props) {\n        super.__construct(props);\n\n        const { product: { id } = {} } = props;\n\n        this.state = {\n            activeImage: this.getBaseImage(),\n            isZoomEnabled: false,\n            prevProdId: id,\n            isImageZoomPopupActive: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { product: { id } } = props;\n        const { prevProdId, activeImage } = state;\n\n        if (prevProdId === id) {\n            return null;\n        }\n\n        return { prevProdId: id, activeImage };\n    }\n\n    componentDidMount() {\n        this.cacheImages();\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            product: { media_gallery_entries: mediaGallery = [] },\n            isZoomEnabled,\n            areDetailsLoaded\n        } = this.props;\n        const { product: { media_gallery_entries: prevMediaGallery = [] }, isZoomEnabled: prevZoomEnabled } = prevProps;\n\n        if (mediaGallery !== prevMediaGallery || isZoomEnabled !== prevZoomEnabled) {\n            this.onActiveImageChange(this.getBaseImage());\n\n            if (areDetailsLoaded && mediaGallery.length > 0) {\n                this.cacheImages();\n            }\n        }\n    }\n\n    cacheImages() {\n        const {\n            product: {\n                type_id: type,\n                variants = []\n            }\n        } = this.props;\n\n        if (type !== PRODUCT_TYPE.configurable) {\n            return;\n        }\n\n        const urls = [];\n\n        variants.forEach(({ media_gallery_entries: mediaGallery = [] }) => {\n            if (mediaGallery.length > 0) {\n                const { base: { url } = {} } = mediaGallery[0];\n\n                urls.push(url);\n            }\n        });\n\n        cacheImages(urls);\n    }\n\n    handleImageZoomPopupActiveChange(isImageZoomPopupActive) {\n        const { isMobile } = this.props;\n\n        if (isMobile) {\n            return;\n        }\n\n        this.setState({ isImageZoomPopupActive });\n    }\n\n    onActiveImageChange(activeImage) {\n        this.setState({\n            activeImage: Math.abs(activeImage),\n            isZoomEnabled: false\n        });\n    }\n\n    getBaseImage() {\n        const {\n            product: {\n                media_gallery_entries: mediaGallery = []\n            }\n        } = this.props;\n\n        const baseImage = mediaGallery.find((value) => value.types.includes(IMAGE_TYPE));\n        const { position = 0 } = baseImage || {};\n\n        if (!mediaGallery.length) {\n            return 0;\n        }\n\n        const positionsArray = mediaGallery.reduce((acc, item) => {\n            const { position } = item;\n\n            acc.push(position);\n\n            return acc;\n        }, []).sort((a, b) => a - b);\n\n        const returnValue = positionsArray.findIndex((value) => value === position);\n\n        if (returnValue === -1) {\n            return 0;\n        }\n\n        return returnValue;\n    }\n\n    getGalleryPictures() {\n        const {\n            areDetailsLoaded,\n            product: {\n                media_gallery_entries: mediaGallery = [],\n                [THUMBNAIL_KEY]: { url: thumbnailUrl } = {},\n                [IMAGE_TYPE]: { url: imageTypeUrl } = {},\n                name\n            }\n        } = this.props;\n\n        const url = imageTypeUrl || thumbnailUrl;\n\n        if (mediaGallery.length) {\n            return mediaGallery\n                .filter(({ disabled }) => !disabled)\n                .sort((a, b) => a.position - b.position);\n        }\n\n        if (!url) {\n            return Array(AMOUNT_OF_PLACEHOLDERS + 1).fill({ media_type: 'placeholder' });\n        }\n\n        const placeholders = !areDetailsLoaded\n            ? Array(AMOUNT_OF_PLACEHOLDERS).fill({ media_type: 'placeholder' }) : [];\n\n        return [\n            {\n                thumbnail: { url },\n                base: { url },\n                id: THUMBNAIL_KEY,\n                label: name,\n                media_type: IMAGE_TYPE\n            },\n            ...placeholders\n        ];\n    }\n\n    containerProps() {\n        const { activeImage, isZoomEnabled, isImageZoomPopupActive } = this.state;\n        const {\n            product: { id },\n            isMobile,\n            isWithEmptySwitcher,\n            showLoader\n        } = this.props;\n\n        return {\n            gallery: this.getGalleryPictures(),\n            productName: this._getProductName(),\n            activeImage,\n            isZoomEnabled,\n            productId: id,\n            isMobile,\n            isImageZoomPopupActive,\n            sliderRef: this.sliderRef,\n            isWithEmptySwitcher,\n            showLoader\n        };\n    }\n\n    /**\n     * Returns the name of the product this gallery if for\n     * @private\n     */\n    _getProductName() {\n        const { product: { name = '' } } = this.props;\n\n        return name;\n    }\n\n    disableZoom() {\n        document.documentElement.classList.remove('overscrollPrevented');\n        this.setState({ isZoomEnabled: false });\n    }\n\n    handleZoomChange(args) {\n        const { isZoomEnabled } = this.state;\n\n        if (args.scale !== 1) {\n            if (isZoomEnabled) {\n                return;\n            }\n            document.documentElement.classList.add('overscrollPrevented');\n            this.setState({ isZoomEnabled: true });\n        }\n    }\n\n    handleImageZoomPopupClose() {\n        this.handleImageZoomPopupActiveChange(false);\n    }\n\n    render() {\n        const { isImageZoomPopupActive, activeImage } = this.state;\n\n        return (\n            <ImageZoomPopup\n              isActive={ isImageZoomPopupActive }\n              onClose={ this.handleImageZoomPopupClose }\n              activeImageId={ activeImage }\n              popupId={ PRODUCT_GALERY_POPUP_ID }\n            >\n                <Subscribe to={ [SharedTransitionContainer] }>\n                    { ({ registerSharedElementDestination }) => (\n                        <ProductGallery\n                          registerSharedElementDestination={ registerSharedElementDestination }\n                          { ...this.containerProps() }\n                          { ...this.containerFunctions }\n                        />\n                    ) }\n                </Subscribe>\n            </ImageZoomPopup>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductGalleryContainer);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport Popup from 'Component/Popup';\nimport { hideActiveOverlay } from 'Store/Overlay/Overlay.action';\nimport { showPopup } from 'Store/Popup/Popup.action';\nimport { ChildrenType, MixType } from 'Type/Common.type';\nimport { noopFn } from 'Util/Common';\n\nimport ImageZoomPopup from './ImageZoomPopup.component';\n\n/** @namespace Component/ImageZoomPopup/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/ImageZoomPopup/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    showPopup: (id, payload) => dispatch(showPopup(id, payload)),\n    hideActiveOverlay: () => dispatch(hideActiveOverlay())\n});\n\n/** @namespace Component/ImageZoomPopup/Container */\nexport class ImageZoomPopupContainer extends PureComponent {\n    static propTypes = {\n        children: ChildrenType.isRequired,\n        showPopup: PropTypes.func.isRequired,\n        hideActiveOverlay: PropTypes.func.isRequired,\n        onClose: PropTypes.func,\n        popupId: PropTypes.string.isRequired,\n        isActive: PropTypes.bool.isRequired,\n        isMobile: PropTypes.bool.isRequired,\n        activeImageId: PropTypes.number.isRequired,\n        mix: MixType\n    };\n\n    static defaultProps = {\n        onClose: noopFn,\n        mix: {}\n    };\n\n    componentDidUpdate(prevProps) {\n        const { isActive: prevIsActive, popupId } = prevProps;\n        const { isActive, showPopup } = this.props;\n\n        if (prevIsActive !== isActive && isActive) {\n            showPopup(popupId, {});\n        }\n    }\n\n    containerProps() {\n        const {\n            children,\n            activeImageId\n        } = this.props;\n\n        return {\n            children,\n            activeImageId\n        };\n    }\n\n    render() {\n        const {\n            isActive,\n            children,\n            mix,\n            popupId,\n            isMobile,\n            onClose\n        } = this.props;\n\n        if (!isActive || isMobile) {\n            return children;\n        }\n\n        return (\n            <Popup\n              id={ popupId }\n              clickOutside={ false }\n              mix={ { block: 'ImageZoomPopup', mix } }\n              contentMix={ { block: 'ImageZoomPopup', elem: 'PopupContent' } }\n              onClose={ onClose }\n              onHide={ onClose }\n            >\n                <ImageZoomPopup\n                  { ...this.containerProps() }\n                />\n            </Popup>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageZoomPopupContainer);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { connect } from 'react-redux';\n\nimport TranslateOnCursorMove from './TranslateOnCursorMove.component';\n\n/** @namespace Component/TranslateOnCursorMove/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    isMobile: state.ConfigReducer.device.isMobile\n});\n\n/** @namespace Component/TranslateOnCursorMove/Container/mapDispatchToProps */\nexport const mapDispatchToProps = () => ({});\n\n// eslint-disable-next-line @scandipwa/scandipwa-guidelines/always-both-mappings\nexport default connect(mapStateToProps, mapDispatchToProps)(TranslateOnCursorMove);\n","import React, { Component } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nvar initialState = {\r\n    wrapperComponent: null,\r\n    contentComponent: null,\r\n    previousScale: 1,\r\n    scale: 1,\r\n    positionX: 0,\r\n    positionY: 0,\r\n    options: {\r\n        disabled: false,\r\n        transformEnabled: true,\r\n        minPositionX: null,\r\n        maxPositionX: null,\r\n        minPositionY: null,\r\n        maxPositionY: null,\r\n        minScale: 1,\r\n        maxScale: 8,\r\n        limitToBounds: true,\r\n        limitToWrapper: false,\r\n        centerContent: true,\r\n        wrapperClass: \"\",\r\n        contentClass: \"\",\r\n    },\r\n    wheel: {\r\n        disabled: false,\r\n        step: 5,\r\n        wheelEnabled: true,\r\n        touchPadEnabled: true,\r\n        limitsOnWheel: false,\r\n    },\r\n    pan: {\r\n        disabled: false,\r\n        panAnimationType: \"linear\",\r\n        lockAxisX: false,\r\n        lockAxisY: false,\r\n        velocity: true,\r\n        velocityEqualToMove: true,\r\n        velocitySensitivity: 2,\r\n        velocityActiveScale: 1,\r\n        velocityMinSpeed: 1,\r\n        velocityBaseTime: 1600,\r\n        velocityAnimationType: \"easeOutQuart\",\r\n        padding: true,\r\n        paddingSize: 30,\r\n        panReturnAnimationTime: 400,\r\n        panReturnAnimationType: \"easeOut\",\r\n        disableOnTarget: [],\r\n    },\r\n    pinch: {\r\n        disabled: false,\r\n    },\r\n    zoomIn: {\r\n        disabled: false,\r\n        step: 20,\r\n        animation: true,\r\n        animationType: \"easeOut\",\r\n        animationTime: 200,\r\n    },\r\n    zoomOut: {\r\n        disabled: false,\r\n        step: 20,\r\n        animation: true,\r\n        animationType: \"easeOut\",\r\n        animationTime: 200,\r\n    },\r\n    doubleClick: {\r\n        disabled: false,\r\n        step: 20,\r\n        mode: \"zoomIn\",\r\n        animation: true,\r\n        animationType: \"easeOut\",\r\n        animationTime: 200,\r\n    },\r\n    reset: {\r\n        disabled: false,\r\n        animation: true,\r\n        animationType: \"easeOut\",\r\n        animationTime: 200,\r\n    },\r\n    scalePadding: {\r\n        disabled: false,\r\n        size: 0.2,\r\n        animationTime: 200,\r\n        animationType: \"easeOut\",\r\n    },\r\n};\n\n/**\r\n * Rounds number to given decimal\r\n * eg. roundNumber(2.34343, 1) => 2.3\r\n */\r\nvar roundNumber = function (num, decimal) {\r\n    return Number(num.toFixed(decimal));\r\n};\r\n/**\r\n * Checks if value is number, if not it returns default value\r\n * 1# eg. checkIsNumber(2, 30) => 2\r\n * 2# eg. checkIsNumber(null, 30) => 30\r\n */\r\nvar checkIsNumber = function (num, defaultValue) {\r\n    return typeof num === \"number\" ? num : defaultValue;\r\n};\r\n/**\r\n * Keeps value between given bounds, used for limiting view to given boundaries\r\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\r\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\r\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\r\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\r\n */\r\nvar boundLimiter = function (value, minBound, maxBound, isActive) {\r\n    if (!isActive)\r\n        return roundNumber(value, 2);\r\n    if (value < minBound)\r\n        return roundNumber(minBound, 2);\r\n    if (value > maxBound)\r\n        return roundNumber(maxBound, 2);\r\n    return roundNumber(value, 2);\r\n};\r\n/**\r\n * Calculate bounding area of zoomed/panned element\r\n */\r\nvar calculateBoundingArea = function (wrapperWidth, newContentWidth, diffWidth, wrapperHeight, newContentHeight, diffHeight, limitToWrapper) {\r\n    var scaleWidthFactor = wrapperWidth > newContentWidth\r\n        ? diffWidth * (limitToWrapper ? 1 : 0.5)\r\n        : 0;\r\n    var scaleHeightFactor = wrapperHeight > newContentHeight\r\n        ? diffHeight * (limitToWrapper ? 1 : 0.5)\r\n        : 0;\r\n    var minPositionX = wrapperWidth - newContentWidth - scaleWidthFactor;\r\n    var maxPositionX = scaleWidthFactor;\r\n    var minPositionY = wrapperHeight - newContentHeight - scaleHeightFactor;\r\n    var maxPositionY = scaleHeightFactor;\r\n    return { minPositionX: minPositionX, maxPositionX: maxPositionX, minPositionY: minPositionY, maxPositionY: maxPositionY };\r\n};\r\n/**\r\n * Returns distance between two points x,y\r\n */\r\nvar getDistance = function (firstPoint, secondPoint) {\r\n    return Math.sqrt(Math.pow(firstPoint.pageX - secondPoint.pageX, 2) +\r\n        Math.pow(firstPoint.pageY - secondPoint.pageY, 2));\r\n};\r\n/**\r\n * Delete undefined values from object keys\r\n * Used for deleting empty props\r\n */\r\nvar deleteUndefinedProps = function (value) {\r\n    var newObject = __assign({}, value);\r\n    Object.keys(newObject).forEach(function (key) { return newObject[key] === undefined && delete newObject[key]; });\r\n    return newObject;\r\n};\r\n/**\r\n * Fire callback if it's function\r\n */\r\nvar handleCallback = function (callback, props) {\r\n    if (callback && typeof callback === \"function\") {\r\n        callback(props);\r\n    }\r\n};\r\nvar handleWheelStop = function (previousEvent, event, stateProvider) {\r\n    var scale = stateProvider.scale, _a = stateProvider.options, maxScale = _a.maxScale, minScale = _a.minScale;\r\n    if (!previousEvent)\r\n        return false;\r\n    if (scale < maxScale || scale > minScale)\r\n        return true;\r\n    if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY))\r\n        return true;\r\n    if (previousEvent.deltaY > 0 && previousEvent.deltaY < event.deltaY)\r\n        return true;\r\n    if (previousEvent.deltaY < 0 && previousEvent.deltaY > event.deltaY)\r\n        return true;\r\n    if (Math.sign(previousEvent.deltaY) !== Math.sign(event.deltaY))\r\n        return true;\r\n    return false;\r\n};\r\nvar mergeProps = function (initialState, dynamicProps) {\r\n    return Object.keys(initialState).reduce(function (acc, curr) {\r\n        if (typeof dynamicProps[curr] === \"object\" && dynamicProps[curr] !== null) {\r\n            acc[curr] = __assign(__assign({}, initialState[curr]), dynamicProps[curr]);\r\n        }\r\n        else {\r\n            acc[curr] =\r\n                dynamicProps[curr] === undefined\r\n                    ? initialState[curr]\r\n                    : dynamicProps[curr];\r\n        }\r\n        return acc;\r\n    }, {});\r\n};\r\nfunction getWindowScaleY(wrapper) {\r\n    if (!wrapper)\r\n        return 0;\r\n    return window.innerHeight / wrapper.offsetHeight;\r\n}\r\nfunction getWindowScaleX(wrapper) {\r\n    if (!wrapper)\r\n        return 0;\r\n    return window.innerWidth / wrapper.offsetWidth;\r\n}\n\n/**\r\n * Functions should return denominator of the target value, which is the next animation step.\r\n * t is a value from 0 to 1, reflecting the percentage of animation status.\r\n */\r\nvar easeOut = function (t) {\r\n    return -Math.cos(t * Math.PI) / 2 + 0.5;\r\n};\r\n// linear\r\nvar linear = function (t) {\r\n    return t;\r\n};\r\n// accelerating from zero velocity\r\nvar easeInQuad = function (t) {\r\n    return t * t;\r\n};\r\n// decelerating to zero velocity\r\nvar easeOutQuad = function (t) {\r\n    return t * (2 - t);\r\n};\r\n// acceleration until halfway, then deceleration\r\nvar easeInOutQuad = function (t) {\r\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n};\r\n// accelerating from zero velocity\r\nvar easeInCubic = function (t) {\r\n    return t * t * t;\r\n};\r\n// decelerating to zero velocity\r\nvar easeOutCubic = function (t) {\r\n    return --t * t * t + 1;\r\n};\r\n// acceleration until halfway, then deceleration\r\nvar easeInOutCubic = function (t) {\r\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n};\r\n// accelerating from zero velocity\r\nvar easeInQuart = function (t) {\r\n    return t * t * t * t;\r\n};\r\n// decelerating to zero velocity\r\nvar easeOutQuart = function (t) {\r\n    return 1 - --t * t * t * t;\r\n};\r\n// acceleration until halfway, then deceleration\r\nvar easeInOutQuart = function (t) {\r\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\r\n};\r\n// accelerating from zero velocity\r\nvar easeInQuint = function (t) {\r\n    return t * t * t * t * t;\r\n};\r\n// decelerating to zero velocity\r\nvar easeOutQuint = function (t) {\r\n    return 1 + --t * t * t * t * t;\r\n};\r\n// acceleration until halfway, then deceleration\r\nvar easeInOutQuint = function (t) {\r\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\r\n};\r\nvar availableAnimations = {\r\n    easeOut: easeOut,\r\n    linear: linear,\r\n    easeInQuad: easeInQuad,\r\n    easeOutQuad: easeOutQuad,\r\n    easeInOutQuad: easeInOutQuad,\r\n    easeInCubic: easeInCubic,\r\n    easeOutCubic: easeOutCubic,\r\n    easeInOutCubic: easeInOutCubic,\r\n    easeInQuart: easeInQuart,\r\n    easeOutQuart: easeOutQuart,\r\n    easeInOutQuart: easeInOutQuart,\r\n    easeInQuint: easeInQuint,\r\n    easeOutQuint: easeOutQuint,\r\n    easeInOutQuint: easeInOutQuint,\r\n};\n\nfunction handleDisableAnimation() {\r\n    if (!this.mounted)\r\n        return;\r\n    if (this.animation) {\r\n        cancelAnimationFrame(this.animation);\r\n    }\r\n    this.animate = false;\r\n    this.animation = false;\r\n    this.velocity = false;\r\n}\r\nfunction animate(animationName, animationTime, callback) {\r\n    var _this = this;\r\n    if (!this.mounted)\r\n        return;\r\n    var startTime = new Date().getTime();\r\n    var lastStep = 1;\r\n    // if another animation is active\r\n    handleDisableAnimation.call(this);\r\n    // new animation\r\n    this.animation = function () {\r\n        if (!_this.animation || !_this.mounted)\r\n            return;\r\n        var frameTime = new Date().getTime() - startTime;\r\n        var animationProgress = frameTime / animationTime;\r\n        var animationType = availableAnimations[animationName];\r\n        var step = animationType(animationProgress);\r\n        if (frameTime >= animationTime) {\r\n            callback(lastStep);\r\n            _this.animation = null;\r\n        }\r\n        else {\r\n            callback(step);\r\n            requestAnimationFrame(_this.animation);\r\n        }\r\n    };\r\n    requestAnimationFrame(this.animation);\r\n}\r\nfunction animateComponent(_a) {\r\n    var _this = this;\r\n    var targetState = _a.targetState, speed = _a.speed, type = _a.type;\r\n    var _b = this.stateProvider, scale = _b.scale, positionX = _b.positionX, positionY = _b.positionY;\r\n    var scaleDiff = targetState.scale - scale;\r\n    var positionXDiff = targetState.positionX - positionX;\r\n    var positionYDiff = targetState.positionY - positionY;\r\n    if (speed === 0) {\r\n        this.stateProvider.previousScale = this.stateProvider.scale;\r\n        this.stateProvider.scale = targetState.scale;\r\n        this.stateProvider.positionX = targetState.positionX;\r\n        this.stateProvider.positionY = targetState.positionY;\r\n        this.applyTransformation();\r\n    }\r\n    else {\r\n        // animation start timestamp\r\n        animate.call(this, type, speed, function (step) {\r\n            _this.stateProvider.previousScale = _this.stateProvider.scale;\r\n            _this.stateProvider.scale = scale + scaleDiff * step;\r\n            _this.stateProvider.positionX = positionX + positionXDiff * step;\r\n            _this.stateProvider.positionY = positionY + positionYDiff * step;\r\n            // apply animation changes\r\n            _this.applyTransformation();\r\n        });\r\n    }\r\n}\n\nfunction checkZoomBounds(zoom, minScale, maxScale, zoomPadding, enablePadding) {\r\n    var scalePadding = enablePadding ? zoomPadding : 0;\r\n    var minScaleWithPadding = minScale - scalePadding;\r\n    if (!isNaN(maxScale) && zoom >= maxScale)\r\n        return maxScale;\r\n    if (!isNaN(minScale) && zoom <= minScaleWithPadding)\r\n        return minScaleWithPadding;\r\n    return zoom;\r\n}\r\nfunction checkPositionBounds(positionX, positionY, bounds, limitToBounds, paddingValue, wrapperComponent) {\r\n    var minPositionX = bounds.minPositionX, minPositionY = bounds.minPositionY, maxPositionX = bounds.maxPositionX, maxPositionY = bounds.maxPositionY;\r\n    var paddingX = wrapperComponent\r\n        ? (paddingValue * wrapperComponent.offsetWidth) / 100\r\n        : 0;\r\n    var paddingY = wrapperComponent\r\n        ? (paddingValue * wrapperComponent.offsetHeight) / 100\r\n        : 0;\r\n    var x = boundLimiter(positionX, minPositionX - paddingX, maxPositionX + paddingX, limitToBounds);\r\n    var y = boundLimiter(positionY, minPositionY - paddingY, maxPositionY + paddingY, limitToBounds);\r\n    return { x: x, y: y };\r\n}\r\nfunction getDelta(event, customDelta) {\r\n    var deltaY = event ? (event.deltaY < 0 ? 1 : -1) : 0;\r\n    var delta = checkIsNumber(customDelta, deltaY);\r\n    return delta;\r\n}\r\nfunction wheelMousePosition(event, contentComponent, scale) {\r\n    var contentRect = contentComponent.getBoundingClientRect();\r\n    // mouse position x, y over wrapper component\r\n    var mouseX = (event.clientX - contentRect.left) / scale;\r\n    var mouseY = (event.clientY - contentRect.top) / scale;\r\n    if (isNaN(mouseX) || isNaN(mouseY))\r\n        console.error(\"No mouse or touch offset found\");\r\n    return {\r\n        mouseX: mouseX,\r\n        mouseY: mouseY,\r\n    };\r\n}\r\nfunction getComponentsSizes(wrapperComponent, contentComponent, newScale) {\r\n    var wrapperWidth = wrapperComponent.offsetWidth;\r\n    var wrapperHeight = wrapperComponent.offsetHeight;\r\n    var contentWidth = contentComponent.offsetWidth;\r\n    var contentHeight = contentComponent.offsetHeight;\r\n    var newContentWidth = contentWidth * newScale;\r\n    var newContentHeight = contentHeight * newScale;\r\n    var newDiffWidth = wrapperWidth - newContentWidth;\r\n    var newDiffHeight = wrapperHeight - newContentHeight;\r\n    return {\r\n        wrapperWidth: wrapperWidth,\r\n        wrapperHeight: wrapperHeight,\r\n        newContentWidth: newContentWidth,\r\n        newDiffWidth: newDiffWidth,\r\n        newContentHeight: newContentHeight,\r\n        newDiffHeight: newDiffHeight,\r\n    };\r\n}\r\nfunction handleCalculatePositions(mouseX, mouseY, newScale, bounds, limitToBounds) {\r\n    var _a = this.stateProvider, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY, transformEnabled = _a.options.transformEnabled;\r\n    var scaleDifference = newScale - scale;\r\n    if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\")\r\n        return console.error(\"Mouse X and Y position were not provided!\");\r\n    if (!transformEnabled)\r\n        return { newPositionX: positionX, newPositionY: positionY };\r\n    var calculatedPositionX = positionX - mouseX * scaleDifference;\r\n    var calculatedPositionY = positionY - mouseY * scaleDifference;\r\n    // do not limit to bounds when there is padding animation,\r\n    // it causes animation strange behaviour\r\n    var newPositions = checkPositionBounds(calculatedPositionX, calculatedPositionY, bounds, limitToBounds, 0, null);\r\n    return newPositions;\r\n}\n\nfunction getClientPosition(event) {\r\n    var touches = event.touches;\r\n    // Mobile points\r\n    if (touches && touches.length === 1) {\r\n        return { clientX: touches[0].clientX, clientY: touches[0].clientY };\r\n    }\r\n    // Desktop points\r\n    if (!touches) {\r\n        return { clientX: event.clientX, clientY: event.clientY };\r\n    }\r\n    return null;\r\n}\r\nfunction handlePanning(event) {\r\n    var _a = this.stateProvider, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY, _b = _a.options, limitToBounds = _b.limitToBounds, minScale = _b.minScale, _c = _a.pan, lockAxisX = _c.lockAxisX, lockAxisY = _c.lockAxisY, padding = _c.padding, paddingSize = _c.paddingSize, wrapperComponent = _a.wrapperComponent;\r\n    if (!this.startCoords)\r\n        return;\r\n    var _d = this.startCoords, x = _d.x, y = _d.y;\r\n    var positions = getClientPosition(event);\r\n    if (!positions)\r\n        return console.error(\"Cannot find mouse client positions\");\r\n    var clientX = positions.clientX, clientY = positions.clientY;\r\n    // Get Position\r\n    var mouseX = clientX - x;\r\n    var mouseY = clientY - y;\r\n    var newPositionX = lockAxisX ? positionX : mouseX;\r\n    var newPositionY = lockAxisY ? positionY : mouseY;\r\n    // padding\r\n    var paddingValue = padding && scale >= minScale ? paddingSize : 0;\r\n    // If position didn't change\r\n    if (newPositionX === positionX && newPositionY === positionY)\r\n        return;\r\n    var calculatedPosition = checkPositionBounds(newPositionX, newPositionY, this.bounds, limitToBounds, paddingValue, wrapperComponent);\r\n    // Save panned position\r\n    handlePaddingAnimation.call(this, calculatedPosition.x, calculatedPosition.y);\r\n}\r\nfunction handlePanningAnimation() {\r\n    var _a = this.stateProvider, scale = _a.scale, minScale = _a.options.minScale, _b = _a.pan, disabled = _b.disabled, padding = _b.padding, panReturnAnimationTime = _b.panReturnAnimationTime, panReturnAnimationType = _b.panReturnAnimationType;\r\n    var isDisabled = disabled || scale < minScale || !padding;\r\n    if (isDisabled)\r\n        return;\r\n    var targetState = handlePanToBounds.call(this);\r\n    animateComponent.call(this, {\r\n        targetState: targetState,\r\n        speed: panReturnAnimationTime,\r\n        type: panReturnAnimationType,\r\n    });\r\n}\r\nfunction handlePanToBounds() {\r\n    var _a = this.stateProvider, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale, _b = _a.options, disabled = _b.disabled, limitToBounds = _b.limitToBounds, limitToWrapper = _b.limitToWrapper;\r\n    var wrapperComponent = this.state.wrapperComponent;\r\n    if (disabled)\r\n        return;\r\n    var _c = this.bounds, maxPositionX = _c.maxPositionX, minPositionX = _c.minPositionX, maxPositionY = _c.maxPositionY, minPositionY = _c.minPositionY;\r\n    var xChanged = positionX > maxPositionX || positionX < minPositionX;\r\n    var yChanged = positionY > maxPositionY || positionY < minPositionY;\r\n    var mouseX = positionX > maxPositionX\r\n        ? wrapperComponent.offsetWidth\r\n        : this.stateProvider.minPositionX || 0;\r\n    var mouseY = positionY > maxPositionY\r\n        ? wrapperComponent.offsetHeight\r\n        : this.stateProvider.minPositionY || 0;\r\n    var mousePosX = mouseX;\r\n    var mousePosY = mouseY;\r\n    var _d = handleCalculatePositions.call(this, mousePosX, mousePosY, scale, this.bounds, limitToBounds || limitToWrapper), x = _d.x, y = _d.y;\r\n    return {\r\n        scale: scale,\r\n        positionX: xChanged ? x : positionX,\r\n        positionY: yChanged ? y : positionY,\r\n    };\r\n}\r\nfunction handlePaddingAnimation(positionX, positionY) {\r\n    var padding = this.stateProvider.pan.padding;\r\n    if (!padding)\r\n        return;\r\n    this.stateProvider.positionX = positionX;\r\n    this.stateProvider.positionY = positionY;\r\n    this.applyTransformation();\r\n}\n\nfunction handleCalculateZoom(delta, step, disablePadding, getTarget, isBtnFunction) {\r\n    var _a = this.stateProvider, scale = _a.scale, _b = _a.options, maxScale = _b.maxScale, minScale = _b.minScale, _c = _a.scalePadding, size = _c.size, disabled = _c.disabled, wrapperComponent = _a.wrapperComponent;\r\n    var targetScale = null;\r\n    if (isBtnFunction) {\r\n        var scaleFactor = window.innerWidth * 0.0001;\r\n        var zoomFactor = delta < 0 ? 30 : 20;\r\n        targetScale =\r\n            scale + (step - step * scaleFactor) * delta * (scale / zoomFactor);\r\n    }\r\n    else {\r\n        var wrapperToWindowScale = 2 - window.innerWidth / wrapperComponent.offsetWidth;\r\n        var scaleFactor = Math.max(0.2, Math.min(0.99, wrapperToWindowScale));\r\n        var zoomFactor = 20;\r\n        targetScale =\r\n            scale + step * delta * ((scale - scale * scaleFactor) / zoomFactor);\r\n    }\r\n    if (getTarget)\r\n        return targetScale;\r\n    var paddingEnabled = disablePadding ? false : !disabled;\r\n    var newScale = checkZoomBounds(roundNumber(targetScale, 3), minScale, maxScale, size, paddingEnabled);\r\n    return newScale;\r\n}\r\nfunction handleCalculateBounds(newScale, limitToWrapper) {\r\n    var _a = this.stateProvider, wrapperComponent = _a.wrapperComponent, contentComponent = _a.contentComponent;\r\n    var _b = getComponentsSizes(wrapperComponent, contentComponent, newScale), wrapperWidth = _b.wrapperWidth, wrapperHeight = _b.wrapperHeight, newContentWidth = _b.newContentWidth, newDiffWidth = _b.newDiffWidth, newContentHeight = _b.newContentHeight, newDiffHeight = _b.newDiffHeight;\r\n    var bounds = calculateBoundingArea(wrapperWidth, newContentWidth, newDiffWidth, wrapperHeight, newContentHeight, newDiffHeight, limitToWrapper);\r\n    // Save bounds\r\n    this.bounds = bounds;\r\n    return bounds;\r\n}\r\n/**\r\n * Wheel zoom event\r\n */\r\nfunction handleWheelZoom(event) {\r\n    var _a = this.stateProvider, scale = _a.scale, contentComponent = _a.contentComponent, limitToBounds = _a.options.limitToBounds, _b = _a.scalePadding, size = _b.size, disabled = _b.disabled, _c = _a.wheel, step = _c.step, limitsOnWheel = _c.limitsOnWheel;\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    var delta = getDelta(event, null);\r\n    var newScale = handleCalculateZoom.call(this, delta, step, !event.ctrlKey);\r\n    // if scale not change\r\n    if (scale === newScale)\r\n        return;\r\n    var bounds = handleCalculateBounds.call(this, newScale, !limitsOnWheel);\r\n    var _d = wheelMousePosition(event, contentComponent, scale), mouseX = _d.mouseX, mouseY = _d.mouseY;\r\n    var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\r\n    var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds), x = _e.x, y = _e.y;\r\n    this.bounds = bounds;\r\n    this.stateProvider.previousScale = scale;\r\n    this.stateProvider.scale = newScale;\r\n    this.stateProvider.positionX = x;\r\n    this.stateProvider.positionY = y;\r\n    this.applyTransformation();\r\n}\r\n/**\r\n * Zoom for animations\r\n */\r\nfunction handleZoomToPoint(isDisabled, scale, mouseX, mouseY, event) {\r\n    var _a = this.stateProvider, contentComponent = _a.contentComponent, _b = _a.options, disabled = _b.disabled, minScale = _b.minScale, maxScale = _b.maxScale, limitToBounds = _b.limitToBounds, limitToWrapper = _b.limitToWrapper;\r\n    if (disabled || isDisabled)\r\n        return;\r\n    var newScale = checkZoomBounds(roundNumber(scale, 2), minScale, maxScale, null, null);\r\n    var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\r\n    var mousePosX = mouseX;\r\n    var mousePosY = mouseY;\r\n    // if event is present - use it's mouse position\r\n    if (event) {\r\n        var mousePosition = wheelMousePosition(event, contentComponent, scale);\r\n        mousePosX = mousePosition.mouseX;\r\n        mousePosY = mousePosition.mouseY;\r\n    }\r\n    var _c = handleCalculatePositions.call(this, mousePosX, mousePosY, newScale, bounds, limitToBounds), x = _c.x, y = _c.y;\r\n    return { scale: newScale, positionX: x, positionY: y };\r\n}\r\nfunction handlePaddingAnimation$1() {\r\n    var _a = this.stateProvider, scale = _a.scale, wrapperComponent = _a.wrapperComponent, _b = _a.options, minScale = _b.minScale, limitToBounds = _b.limitToBounds, _c = _a.scalePadding, disabled = _c.disabled, animationTime = _c.animationTime, animationType = _c.animationType;\r\n    var isDisabled = disabled || scale >= minScale;\r\n    if (scale >= 1 || limitToBounds) {\r\n        // fire fit to bounds animation\r\n        handlePanningAnimation.call(this);\r\n    }\r\n    if (isDisabled)\r\n        return;\r\n    var mouseX = wrapperComponent.offsetWidth / 2;\r\n    var mouseY = wrapperComponent.offsetHeight / 2;\r\n    var targetState = handleZoomToPoint.call(this, false, minScale, mouseX, mouseY, null);\r\n    animateComponent.call(this, {\r\n        targetState: targetState,\r\n        speed: animationTime,\r\n        type: animationType,\r\n    });\r\n}\r\n/**\r\n * Button zoom events\r\n */\r\nfunction handleDoubleClick(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    var _a = this.stateProvider, contentComponent = _a.contentComponent, scale = _a.scale, _b = _a.doubleClick, disabled = _b.disabled, mode = _b.mode, step = _b.step, animationTime = _b.animationTime, animationType = _b.animationType;\r\n    if (mode === \"reset\") {\r\n        return resetTransformations.call(this, event, animationTime);\r\n    }\r\n    var delta = mode === \"zoomOut\" ? -1 : 1;\r\n    var newScale = handleCalculateZoom.call(this, delta, step, undefined, undefined, true);\r\n    var _c = wheelMousePosition(event, contentComponent, scale), mouseX = _c.mouseX, mouseY = _c.mouseY;\r\n    var targetState = handleZoomToPoint.call(this, disabled, newScale, mouseX, mouseY);\r\n    if (targetState.scale === scale)\r\n        return;\r\n    var targetScale = handleCalculateZoom.call(this, delta, step, true, undefined, true);\r\n    var time = getButtonAnimationTime(targetScale, newScale, animationTime);\r\n    animateComponent.call(this, {\r\n        targetState: targetState,\r\n        speed: time,\r\n        type: animationType,\r\n    });\r\n}\r\nfunction handleZoomControls(customDelta, customStep) {\r\n    var _a = this.stateProvider, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY, wrapperComponent = _a.wrapperComponent, zoomIn = _a.zoomIn, zoomOut = _a.zoomOut;\r\n    var wrapperWidth = wrapperComponent.offsetWidth;\r\n    var wrapperHeight = wrapperComponent.offsetHeight;\r\n    var mouseX = (wrapperWidth / 2 - positionX) / scale;\r\n    var mouseY = (wrapperHeight / 2 - positionY) / scale;\r\n    var newScale = handleCalculateZoom.call(this, customDelta, customStep, undefined, undefined, true);\r\n    var isZoomIn = newScale > scale;\r\n    var animationSpeed = isZoomIn\r\n        ? zoomIn.animationTime\r\n        : zoomOut.animationTime;\r\n    var animationType = isZoomIn ? zoomIn.animationType : zoomOut.animationType;\r\n    var isDisabled = isZoomIn ? zoomIn.disabled : zoomOut.disabled;\r\n    var targetState = handleZoomToPoint.call(this, isDisabled, newScale, mouseX, mouseY);\r\n    if (targetState.scale === scale)\r\n        return;\r\n    var targetScale = handleCalculateZoom.call(this, customDelta, customStep, true, undefined, true);\r\n    var time = getButtonAnimationTime(targetScale, newScale, animationSpeed);\r\n    animateComponent.call(this, {\r\n        targetState: targetState,\r\n        speed: time,\r\n        type: animationType,\r\n    });\r\n}\r\nfunction resetTransformations(animationSpeed) {\r\n    var _a = this.props.defaultValues, defaultScale = _a.defaultScale, defaultPositionX = _a.defaultPositionX, defaultPositionY = _a.defaultPositionY;\r\n    var _b = this.stateProvider, scale = _b.scale, positionX = _b.positionX, positionY = _b.positionY, reset = _b.reset, _c = _b.options, disabled = _c.disabled, limitToBounds = _c.limitToBounds, centerContent = _c.centerContent, limitToWrapper = _c.limitToWrapper;\r\n    if (disabled || reset.disabled)\r\n        return;\r\n    if (scale === defaultScale &&\r\n        positionX === defaultPositionX &&\r\n        positionY === defaultPositionY)\r\n        return;\r\n    var speed = typeof animationSpeed === \"number\" ? animationSpeed : reset.animationTime;\r\n    var targetScale = checkIsNumber(defaultScale, initialState.scale);\r\n    var newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\r\n    var newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\r\n    if ((limitToBounds && !limitToWrapper) || centerContent) {\r\n        var bounds = handleCalculateBounds.call(this, targetScale, limitToWrapper);\r\n        newPositionX = bounds.minPositionX;\r\n        newPositionY = bounds.minPositionY;\r\n    }\r\n    var targetState = {\r\n        scale: targetScale,\r\n        positionX: newPositionX,\r\n        positionY: newPositionY,\r\n    };\r\n    animateComponent.call(this, {\r\n        targetState: targetState,\r\n        speed: speed,\r\n        type: reset.animationType,\r\n    });\r\n}\r\nfunction getButtonAnimationTime(targetScale, newScale, time) {\r\n    return time * (newScale / targetScale);\r\n}\n\nfunction round(number, decimal) {\r\n    var roundNumber = Math.pow(10, decimal);\r\n    return Math.round(number * roundNumber) / roundNumber;\r\n}\r\nfunction getCurrentDistance(event) {\r\n    return getDistance(event.touches[0], event.touches[1]);\r\n}\r\nfunction checkIfInfinite(number) {\r\n    return number === Infinity || number === -Infinity;\r\n}\r\nfunction calculatePinchZoom(currentDistance, pinchStartDistance) {\r\n    var _a = this.stateProvider, _b = _a.options, minScale = _b.minScale, maxScale = _b.maxScale, _c = _a.scalePadding, size = _c.size, disabled = _c.disabled;\r\n    if (typeof pinchStartDistance !== \"number\" ||\r\n        typeof currentDistance !== \"number\")\r\n        return console.error(\"Pinch touches distance was not provided\");\r\n    if (currentDistance < 0)\r\n        return;\r\n    var touchProportion = currentDistance / pinchStartDistance;\r\n    var scaleDifference = touchProportion * this.pinchStartScale;\r\n    return checkZoomBounds(roundNumber(scaleDifference, 2), minScale, maxScale, size, !disabled);\r\n}\r\nfunction calculateMidpoint(event, scale, contentComponent) {\r\n    var contentRect = contentComponent.getBoundingClientRect();\r\n    var touches = event.touches;\r\n    var firstPointX = round(touches[0].clientX - contentRect.left, 5);\r\n    var firstPointY = round(touches[0].clientY - contentRect.top, 5);\r\n    var secondPointX = round(touches[1].clientX - contentRect.left, 5);\r\n    var secondPointY = round(touches[1].clientY - contentRect.top, 5);\r\n    return {\r\n        mouseX: (firstPointX + secondPointX) / 2 / scale,\r\n        mouseY: (firstPointY + secondPointY) / 2 / scale,\r\n    };\r\n}\r\nfunction handleZoomPinch(event) {\r\n    var _a = this.stateProvider, scale = _a.scale, _b = _a.options, limitToBounds = _b.limitToBounds, limitToWrapper = _b.limitToWrapper, _c = _a.scalePadding, disabled = _c.disabled, size = _c.size, limitsOnWheel = _a.wheel.limitsOnWheel, pinch = _a.pinch;\r\n    var contentComponent = this.state.contentComponent;\r\n    if (pinch.disabled || this.stateProvider.options.disabled)\r\n        return;\r\n    if (event.cancelable) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    }\r\n    // if one finger starts from outside of wrapper\r\n    if (this.pinchStartDistance === null)\r\n        return;\r\n    // Position transformation\r\n    var _d = calculateMidpoint(event, scale, contentComponent), mouseX = _d.mouseX, mouseY = _d.mouseY;\r\n    // if touches goes off of the wrapper element\r\n    if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY))\r\n        return;\r\n    var currentDistance = getCurrentDistance(event);\r\n    var newScale = calculatePinchZoom.call(this, currentDistance, this.pinchStartDistance);\r\n    if (checkIfInfinite(newScale) || newScale === scale)\r\n        return;\r\n    // Get new element sizes to calculate bounds\r\n    var bounds = handleCalculateBounds.call(this, newScale, limitToWrapper);\r\n    // Calculate transformations\r\n    var isLimitedToBounds = limitToBounds && (disabled || size === 0 || limitsOnWheel);\r\n    var _e = handleCalculatePositions.call(this, mouseX, mouseY, newScale, bounds, isLimitedToBounds), x = _e.x, y = _e.y;\r\n    this.lastDistance = currentDistance;\r\n    this.stateProvider.positionX = x;\r\n    this.stateProvider.positionY = y;\r\n    this.stateProvider.scale = newScale;\r\n    this.stateProvider.previousScale = scale;\r\n    // update component transformation\r\n    this.applyTransformation();\r\n}\n\nvar throttleTime = 30;\r\nfunction velocityTimeSpeed(speed, animationTime) {\r\n    var velocityEqualToMove = this.stateProvider.pan.velocityEqualToMove;\r\n    if (velocityEqualToMove) {\r\n        return animationTime - animationTime / Math.max(1, speed);\r\n    }\r\n    return animationTime;\r\n}\r\nfunction handleEnableVelocity() {\r\n    this.setState({ startAnimation: false });\r\n}\r\nfunction handleFireVelocity() {\r\n    this.setState({ startAnimation: true });\r\n}\r\nfunction animateVelocity() {\r\n    var _this = this;\r\n    var _a = this.stateProvider, positionX = _a.positionX, positionY = _a.positionY, limitToBounds = _a.options.limitToBounds, _b = _a.pan, velocityBaseTime = _b.velocityBaseTime, lockAxisX = _b.lockAxisX, lockAxisY = _b.lockAxisY, velocityAnimationType = _b.velocityAnimationType, panReturnAnimationTime = _b.panReturnAnimationTime, panReturnAnimationType = _b.panReturnAnimationType, padding = _b.padding, paddingSize = _b.paddingSize, wrapperComponent = _a.wrapperComponent;\r\n    if (!this.mounted)\r\n        return;\r\n    if (!this.velocity || !this.bounds)\r\n        return handleDisableAnimation.call(this);\r\n    var _c = this.bounds, maxPositionX = _c.maxPositionX, minPositionX = _c.minPositionX, maxPositionY = _c.maxPositionY, minPositionY = _c.minPositionY;\r\n    var _d = this.velocity, velocityX = _d.velocityX, velocityY = _d.velocityY, velocity = _d.velocity;\r\n    var animationTime = velocityTimeSpeed.call(this, velocity, velocityBaseTime);\r\n    if (!animationTime) {\r\n        handlePanningAnimation.call(this);\r\n        return;\r\n    }\r\n    var targetX = velocityX;\r\n    var targetY = velocityY;\r\n    // pan return animation\r\n    var newAnimationTime = animationTime > panReturnAnimationTime\r\n        ? animationTime\r\n        : panReturnAnimationTime;\r\n    var paddingValue = padding ? paddingSize : 0;\r\n    var paddingX = wrapperComponent\r\n        ? (paddingValue * wrapperComponent.offsetWidth) / 100\r\n        : 0;\r\n    var paddingY = wrapperComponent\r\n        ? (paddingValue * wrapperComponent.offsetHeight) / 100\r\n        : 0;\r\n    var maxTargetX = maxPositionX + paddingX;\r\n    var minTargetX = minPositionX - paddingX;\r\n    var maxTargetY = maxPositionY + paddingY;\r\n    var minTargetY = minPositionY - paddingY;\r\n    var startPosition = checkPositionBounds(positionX, positionY, this.bounds, limitToBounds, paddingValue, wrapperComponent);\r\n    var startTime = new Date().getTime();\r\n    // animation start timestamp\r\n    animate.call(this, velocityAnimationType, newAnimationTime, function (step) {\r\n        var frameTime = new Date().getTime() - startTime;\r\n        var animationProgress = frameTime / panReturnAnimationTime;\r\n        var returnAnimation = availableAnimations[panReturnAnimationType];\r\n        var customReturnStep = returnAnimation(animationProgress);\r\n        if (frameTime > panReturnAnimationTime ||\r\n            customReturnStep > 1 ||\r\n            customReturnStep === Infinity ||\r\n            customReturnStep === -Infinity)\r\n            customReturnStep = 1;\r\n        var currentPositionX = getPosition(lockAxisX, targetX, step, customReturnStep, minPositionX, maxPositionX, limitToBounds, positionX, startPosition.x, minTargetX, maxTargetX);\r\n        var currentPositionY = getPosition(lockAxisY, targetY, step, customReturnStep, minPositionY, maxPositionY, limitToBounds, positionY, startPosition.y, minTargetY, maxTargetY);\r\n        if (positionX !== currentPositionX || positionY !== currentPositionY) {\r\n            // Save panned position\r\n            _this.stateProvider.positionX = currentPositionX;\r\n            _this.stateProvider.positionY = currentPositionY;\r\n            // apply animation changes\r\n            _this.applyTransformation();\r\n        }\r\n    });\r\n}\r\nfunction calculateVelocityStart(event) {\r\n    var _this = this;\r\n    var _a = this.stateProvider, scale = _a.scale, disabled = _a.options.disabled, _b = _a.pan, velocity = _b.velocity, velocitySensitivity = _b.velocitySensitivity, velocityActiveScale = _b.velocityActiveScale, velocityMinSpeed = _b.velocityMinSpeed, wrapperComponent = _a.wrapperComponent;\r\n    if (!velocity || velocityActiveScale >= scale || disabled)\r\n        return;\r\n    handleEnableVelocity.call(this);\r\n    var now = Date.now();\r\n    if (this.lastMousePosition) {\r\n        var position_1 = getClientPosition(event);\r\n        if (!position_1)\r\n            return console.error(\"No mouse or touch position detected\");\r\n        var clientX = position_1.clientX, clientY = position_1.clientY;\r\n        var distanceX = clientX - this.lastMousePosition.clientX;\r\n        var distanceY = clientY - this.lastMousePosition.clientY;\r\n        var interval = now - this.velocityTime;\r\n        var wrapperToWindowScaleX = 2 - wrapperComponent.offsetWidth / window.innerWidth;\r\n        var wrapperToWindowScaleY = 2 - wrapperComponent.offsetHeight / window.innerHeight;\r\n        var scaledX = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleX));\r\n        var scaledY = 20 * Math.max(velocityMinSpeed, Math.min(2, wrapperToWindowScaleY));\r\n        var velocityX = (distanceX / interval) * velocitySensitivity * scale * scaledX;\r\n        var velocityY = (distanceY / interval) * velocitySensitivity * scale * scaledY;\r\n        var speed = distanceX * distanceX + distanceY * distanceY;\r\n        var velocity_1 = (Math.sqrt(speed) / interval) * velocitySensitivity;\r\n        if (this.velocity && velocity_1 < this.velocity.velocity && this.throttle)\r\n            return;\r\n        this.velocity = { velocityX: velocityX, velocityY: velocityY, velocity: velocity_1 };\r\n        // throttling\r\n        if (this.throttle)\r\n            clearTimeout(this.throttle);\r\n        this.throttle = setTimeout(function () {\r\n            if (_this.mounted)\r\n                _this.throttle = false;\r\n        }, throttleTime);\r\n    }\r\n    var position = getClientPosition(event);\r\n    this.lastMousePosition = position;\r\n    this.velocityTime = now;\r\n}\r\nfunction getPosition(isLocked, target, step, panReturnStep, minBound, maxBound, limitToBounds, offset, startPosition, minTarget, maxTarget) {\r\n    if (limitToBounds) {\r\n        if (startPosition > minBound && offset > maxBound) {\r\n            var newPosition = startPosition - (startPosition - maxBound) * panReturnStep;\r\n            if (newPosition > maxTarget)\r\n                return maxTarget;\r\n            if (newPosition < maxBound)\r\n                return maxBound;\r\n            return newPosition;\r\n        }\r\n        if (startPosition < minBound && offset < minBound) {\r\n            var newPosition = startPosition - (startPosition - minBound) * panReturnStep;\r\n            if (newPosition < minTarget)\r\n                return minTarget;\r\n            if (newPosition > minBound)\r\n                return minBound;\r\n            return newPosition;\r\n        }\r\n    }\r\n    if (isLocked)\r\n        return startPosition;\r\n    var offsetPosition = offset + target * step;\r\n    return boundLimiter(offsetPosition, minBound, maxBound, limitToBounds);\r\n}\n\n// We want to make event listeners non-passive, and to do so have to check\r\nfunction makePassiveEventOption(passive) {\r\n    return  passive;\r\n}\n\nvar propsList = [\r\n    \"previousScale\",\r\n    \"scale\",\r\n    \"positionX\",\r\n    \"positionY\",\r\n    \"defaultPositionX\",\r\n    \"defaultPositionY\",\r\n    \"defaultScale\",\r\n    \"onWheelStart\",\r\n    \"onWheel\",\r\n    \"onWheelStop\",\r\n    \"onPanningStart\",\r\n    \"onPanning\",\r\n    \"onPanningStop\",\r\n    \"onPinchingStart\",\r\n    \"onPinching\",\r\n    \"onPinchingStop\",\r\n    \"onZoomChange\",\r\n    \"options\",\r\n    \"wheel\",\r\n    \"scalePadding\",\r\n    \"pan\",\r\n    \"pinch\",\r\n    \"zoomIn\",\r\n    \"zoomOut\",\r\n    \"doubleClick\",\r\n    \"reset\",\r\n];\r\nvar getValidPropsFromObject = function (props) {\r\n    return Object.keys(props).reduce(function (acc, key) {\r\n        if (propsList.includes(key)) {\r\n            acc[key] = props[key];\r\n        }\r\n        return acc;\r\n    }, {});\r\n};\n\nvar Context = React.createContext({});\r\nvar wheelStopEventTimer = null;\r\nvar wheelStopEventTime = 180;\r\nvar wheelAnimationTimer = null;\r\nvar wheelAnimationTime = 100;\r\nvar StateProvider = /** @class */ (function (_super) {\r\n    __extends(StateProvider, _super);\r\n    function StateProvider() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.mounted = true;\r\n        _this.state = {\r\n            wrapperComponent: undefined,\r\n            contentComponent: undefined,\r\n        };\r\n        _this.stateProvider = __assign(__assign(__assign(__assign({}, initialState), mergeProps(initialState, _this.props.dynamicValues)), _this.props.defaultValues), { previousScale: _this.props.dynamicValues.scale ||\r\n                _this.props.defaultValues.scale ||\r\n                initialState.scale });\r\n        _this.windowToWrapperScaleX = 0;\r\n        _this.windowToWrapperScaleY = 0;\r\n        // panning helpers\r\n        _this.startCoords = null;\r\n        _this.isDown = false;\r\n        // pinch helpers\r\n        _this.pinchStartDistance = null;\r\n        _this.lastDistance = null;\r\n        _this.pinchStartScale = null;\r\n        _this.distance = null;\r\n        _this.bounds = null;\r\n        // velocity helpers\r\n        _this.velocityTime = null;\r\n        _this.lastMousePosition = null;\r\n        _this.velocity = null;\r\n        _this.offsetX = null;\r\n        _this.offsetY = null;\r\n        _this.throttle = false;\r\n        // wheel helpers\r\n        _this.previousWheelEvent = null;\r\n        _this.lastScale = null;\r\n        // animations helpers\r\n        _this.animate = null;\r\n        _this.animation = null;\r\n        _this.maxBounds = null;\r\n        //////////\r\n        // Wheel\r\n        //////////\r\n        _this.handleWheel = function (event) {\r\n            var _a = _this.stateProvider, scale = _a.scale, _b = _a.wheel, disabled = _b.disabled, wheelEnabled = _b.wheelEnabled, touchPadEnabled = _b.touchPadEnabled;\r\n            var _c = _this.props, onWheelStart = _c.onWheelStart, onWheel = _c.onWheel, onWheelStop = _c.onWheelStop;\r\n            var _d = _this.state, wrapperComponent = _d.wrapperComponent, contentComponent = _d.contentComponent;\r\n            if (_this.isDown ||\r\n                disabled ||\r\n                _this.stateProvider.options.disabled ||\r\n                !wrapperComponent ||\r\n                !contentComponent)\r\n                return;\r\n            // ctrlKey detects if touchpad execute wheel or pinch gesture\r\n            if (!wheelEnabled && !event.ctrlKey)\r\n                return;\r\n            if (!touchPadEnabled && event.ctrlKey)\r\n                return;\r\n            // Wheel start event\r\n            if (!wheelStopEventTimer) {\r\n                _this.lastScale = scale;\r\n                handleDisableAnimation.call(_this);\r\n                handleCallback(onWheelStart, _this.getCallbackProps());\r\n            }\r\n            // Wheel event\r\n            handleWheelZoom.call(_this, event);\r\n            handleCallback(onWheel, _this.getCallbackProps());\r\n            _this.applyTransformation(null, null, null);\r\n            _this.previousWheelEvent = event;\r\n            // Wheel stop event\r\n            if (handleWheelStop(_this.previousWheelEvent, event, _this.stateProvider)) {\r\n                clearTimeout(wheelStopEventTimer);\r\n                wheelStopEventTimer = setTimeout(function () {\r\n                    if (!_this.mounted)\r\n                        return;\r\n                    handleCallback(onWheelStop, _this.getCallbackProps());\r\n                    wheelStopEventTimer = null;\r\n                }, wheelStopEventTime);\r\n            }\r\n            // cancel animation\r\n            _this.animate = false;\r\n            // fire animation\r\n            _this.lastScale = _this.stateProvider.scale;\r\n            clearTimeout(wheelAnimationTimer);\r\n            wheelAnimationTimer = setTimeout(function () {\r\n                if (!_this.mounted)\r\n                    return;\r\n                handlePaddingAnimation$1.call(_this, event);\r\n            }, wheelAnimationTime);\r\n        };\r\n        //////////\r\n        // Panning\r\n        //////////\r\n        _this.checkPanningTarget = function (event) {\r\n            var disableOnTarget = _this.stateProvider.pan.disableOnTarget;\r\n            return (disableOnTarget\r\n                .map(function (tag) { return tag.toUpperCase(); })\r\n                .includes(event.target.tagName) ||\r\n                disableOnTarget.find(function (element) {\r\n                    return event.target.classList.value.includes(element);\r\n                }));\r\n        };\r\n        _this.checkIsPanningActive = function (event) {\r\n            var disabled = _this.stateProvider.pan.disabled;\r\n            var _a = _this.state, wrapperComponent = _a.wrapperComponent, contentComponent = _a.contentComponent;\r\n            return (!_this.isDown ||\r\n                disabled ||\r\n                _this.stateProvider.options.disabled ||\r\n                (event.touches &&\r\n                    (event.touches.length !== 1 ||\r\n                        Math.abs(_this.startCoords.x - event.touches[0].clientX) < 1 ||\r\n                        Math.abs(_this.startCoords.y - event.touches[0].clientY) < 1)) ||\r\n                !wrapperComponent ||\r\n                !contentComponent);\r\n        };\r\n        _this.handleSetUpPanning = function (x, y) {\r\n            var _a = _this.stateProvider, positionX = _a.positionX, positionY = _a.positionY;\r\n            _this.isDown = true;\r\n            _this.startCoords = { x: x - positionX, y: y - positionY };\r\n            handleCallback(_this.props.onPanningStart, _this.getCallbackProps());\r\n        };\r\n        _this.handleStartPanning = function (event) {\r\n            var _a = _this.stateProvider, wrapperComponent = _a.wrapperComponent, scale = _a.scale, _b = _a.options, minScale = _b.minScale, maxScale = _b.maxScale, limitToWrapper = _b.limitToWrapper, disabled = _a.pan.disabled;\r\n            var target = event.target, touches = event.touches;\r\n            if (disabled ||\r\n                _this.stateProvider.options.disabled ||\r\n                (wrapperComponent && !wrapperComponent.contains(target)) ||\r\n                _this.checkPanningTarget(event) ||\r\n                scale < minScale ||\r\n                scale > maxScale)\r\n                return;\r\n            handleDisableAnimation.call(_this);\r\n            _this.bounds = handleCalculateBounds.call(_this, scale, limitToWrapper);\r\n            // Mobile points\r\n            if (touches && touches.length === 1) {\r\n                _this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\r\n            }\r\n            // Desktop points\r\n            if (!touches) {\r\n                _this.handleSetUpPanning(event.clientX, event.clientY);\r\n            }\r\n        };\r\n        _this.handlePanning = function (event) {\r\n            if (_this.isDown)\r\n                event.preventDefault();\r\n            if (_this.checkIsPanningActive(event))\r\n                return;\r\n            event.stopPropagation();\r\n            calculateVelocityStart.call(_this, event);\r\n            handlePanning.call(_this, event);\r\n            handleCallback(_this.props.onPanning, _this.getCallbackProps());\r\n        };\r\n        _this.handleStopPanning = function () {\r\n            if (_this.isDown) {\r\n                _this.isDown = false;\r\n                _this.animate = false;\r\n                _this.animation = false;\r\n                handleFireVelocity.call(_this);\r\n                handleCallback(_this.props.onPanningStop, _this.getCallbackProps());\r\n                var _a = _this.stateProvider, velocity = _a.pan.velocity, scale = _a.scale;\r\n                // start velocity animation\r\n                if (_this.velocity && velocity && scale > 1) {\r\n                    animateVelocity.call(_this);\r\n                }\r\n                else {\r\n                    // fire fit to bounds animation\r\n                    handlePanningAnimation.call(_this);\r\n                }\r\n            }\r\n        };\r\n        //////////\r\n        // Pinch\r\n        //////////\r\n        _this.handlePinchStart = function (event) {\r\n            var scale = _this.stateProvider.scale;\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            handleDisableAnimation.call(_this);\r\n            var distance = getDistance(event.touches[0], event.touches[1]);\r\n            _this.pinchStartDistance = distance;\r\n            _this.lastDistance = distance;\r\n            _this.pinchStartScale = scale;\r\n            _this.isDown = false;\r\n            handleCallback(_this.props.onPinchingStart, _this.getCallbackProps());\r\n        };\r\n        _this.handlePinch = function (event) {\r\n            _this.isDown = false;\r\n            handleZoomPinch.call(_this, event);\r\n            handleCallback(_this.props.onPinching, _this.getCallbackProps());\r\n        };\r\n        _this.handlePinchStop = function () {\r\n            if (typeof _this.pinchStartScale === \"number\") {\r\n                _this.isDown = false;\r\n                _this.velocity = null;\r\n                _this.lastDistance = null;\r\n                _this.pinchStartScale = null;\r\n                _this.pinchStartDistance = null;\r\n                handlePaddingAnimation$1.call(_this);\r\n                handleCallback(_this.props.onPinchingStop, _this.getCallbackProps());\r\n            }\r\n        };\r\n        //////////\r\n        // Touch Events\r\n        //////////\r\n        _this.handleTouchStart = function (event) {\r\n            var _a = _this.stateProvider, wrapperComponent = _a.wrapperComponent, contentComponent = _a.contentComponent, scale = _a.scale, _b = _a.options, disabled = _b.disabled, minScale = _b.minScale;\r\n            var touches = event.touches;\r\n            if (disabled || !wrapperComponent || !contentComponent || scale < minScale)\r\n                return;\r\n            handleDisableAnimation.call(_this);\r\n            if (touches && touches.length === 1)\r\n                return _this.handleStartPanning(event);\r\n            if (touches && touches.length === 2)\r\n                return _this.handlePinchStart(event);\r\n        };\r\n        _this.handleTouch = function (event) {\r\n            var _a = _this.stateProvider, pan = _a.pan, pinch = _a.pinch, options = _a.options;\r\n            if (options.disabled)\r\n                return;\r\n            if (!pan.disabled && event.touches.length === 1)\r\n                return _this.handlePanning(event);\r\n            if (!pinch.disabled && event.touches.length === 2)\r\n                return _this.handlePinch(event);\r\n        };\r\n        _this.handleTouchStop = function () {\r\n            _this.handleStopPanning();\r\n            _this.handlePinchStop();\r\n        };\r\n        //////////\r\n        // Controls\r\n        //////////\r\n        _this.zoomIn = function (event) {\r\n            var _a = _this.stateProvider, _b = _a.zoomIn, disabled = _b.disabled, step = _b.step, options = _a.options;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (!event)\r\n                throw Error(\"Zoom in function requires event prop\");\r\n            if (disabled || options.disabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            handleZoomControls.call(_this, 1, step);\r\n        };\r\n        _this.zoomOut = function (event) {\r\n            var _a = _this.stateProvider, _b = _a.zoomOut, disabled = _b.disabled, step = _b.step, options = _a.options;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (!event)\r\n                throw Error(\"Zoom out function requires event prop\");\r\n            if (disabled || options.disabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            handleZoomControls.call(_this, -1, step);\r\n        };\r\n        _this.handleDbClick = function (event) {\r\n            var _a = _this.stateProvider, options = _a.options, _b = _a.doubleClick, disabled = _b.disabled, step = _b.step;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (!event)\r\n                throw Error(\"Double click function requires event prop\");\r\n            if (disabled || options.disabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            handleDoubleClick.call(_this, event, 1, step);\r\n        };\r\n        _this.setScale = function (newScale, speed, type) {\r\n            if (speed === void 0) { speed = 200; }\r\n            if (type === void 0) { type = \"easeOut\"; }\r\n            var _a = _this.stateProvider, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale, disabled = _a.options.disabled;\r\n            var _b = _this.state, wrapperComponent = _b.wrapperComponent, contentComponent = _b.contentComponent;\r\n            if (disabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            var targetState = {\r\n                positionX: positionX,\r\n                positionY: positionY,\r\n                scale: isNaN(newScale) ? scale : newScale,\r\n            };\r\n            animateComponent.call(_this, {\r\n                targetState: targetState,\r\n                speed: speed,\r\n                type: type,\r\n            });\r\n        };\r\n        _this.setPositionX = function (newPosX, speed, type) {\r\n            if (speed === void 0) { speed = 200; }\r\n            if (type === void 0) { type = \"easeOut\"; }\r\n            var _a = _this.stateProvider, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale, _b = _a.options, disabled = _b.disabled, transformEnabled = _b.transformEnabled;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            var targetState = {\r\n                positionX: isNaN(newPosX) ? positionX : newPosX,\r\n                positionY: positionY,\r\n                scale: scale,\r\n            };\r\n            animateComponent.call(_this, {\r\n                targetState: targetState,\r\n                speed: speed,\r\n                type: type,\r\n            });\r\n        };\r\n        _this.setPositionY = function (newPosY, speed, type) {\r\n            if (speed === void 0) { speed = 200; }\r\n            if (type === void 0) { type = \"easeOut\"; }\r\n            var _a = _this.stateProvider, positionX = _a.positionX, scale = _a.scale, positionY = _a.positionY, _b = _a.options, disabled = _b.disabled, transformEnabled = _b.transformEnabled;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            var targetState = {\r\n                positionX: positionX,\r\n                positionY: isNaN(newPosY) ? positionY : newPosY,\r\n                scale: scale,\r\n            };\r\n            animateComponent.call(_this, {\r\n                targetState: targetState,\r\n                speed: speed,\r\n                type: type,\r\n            });\r\n        };\r\n        _this.setTransform = function (newPosX, newPosY, newScale, speed, type) {\r\n            if (speed === void 0) { speed = 200; }\r\n            if (type === void 0) { type = \"easeOut\"; }\r\n            var _a = _this.stateProvider, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale, _b = _a.options, disabled = _b.disabled, transformEnabled = _b.transformEnabled;\r\n            var _c = _this.state, wrapperComponent = _c.wrapperComponent, contentComponent = _c.contentComponent;\r\n            if (disabled || !transformEnabled || !wrapperComponent || !contentComponent)\r\n                return;\r\n            var targetState = {\r\n                positionX: isNaN(newPosX) ? positionX : newPosX,\r\n                positionY: isNaN(newPosY) ? positionY : newPosY,\r\n                scale: isNaN(newScale) ? scale : newScale,\r\n            };\r\n            animateComponent.call(_this, {\r\n                targetState: targetState,\r\n                speed: speed,\r\n                type: type,\r\n            });\r\n        };\r\n        _this.resetTransform = function () {\r\n            var _a = _this.stateProvider.options, disabled = _a.disabled, transformEnabled = _a.transformEnabled;\r\n            if (disabled || !transformEnabled)\r\n                return;\r\n            resetTransformations.call(_this);\r\n        };\r\n        _this.setDefaultState = function () {\r\n            _this.animation = null;\r\n            _this.stateProvider = __assign(__assign(__assign({}, _this.stateProvider), { scale: initialState.scale, positionX: initialState.positionX, positionY: initialState.positionY }), _this.props.defaultValues);\r\n            _this.forceUpdate();\r\n        };\r\n        //////////\r\n        // Setters\r\n        //////////\r\n        _this.setWrapperComponent = function (wrapperComponent) {\r\n            _this.setState({ wrapperComponent: wrapperComponent });\r\n        };\r\n        _this.setContentComponent = function (contentComponent) {\r\n            _this.setState({ contentComponent: contentComponent }, function () {\r\n                var _a = _this.stateProvider, wrapperComponent = _a.wrapperComponent, _b = _a.options, centerContent = _b.centerContent, limitToBounds = _b.limitToBounds, limitToWrapper = _b.limitToWrapper, scale = _a.scale;\r\n                var _c = _this.props.defaultValues, positionX = _c.positionX, positionY = _c.positionY;\r\n                if ((limitToBounds && !limitToWrapper) ||\r\n                    (centerContent && !positionX && !positionY)) {\r\n                    var transform = \"translate(25%, 25%) scale(\" + scale + \")\";\r\n                    contentComponent.style.transform = transform;\r\n                    contentComponent.style.WebkitTransform = transform;\r\n                    // force update to inject state to the context\r\n                    _this.forceUpdate();\r\n                    var startTime_1 = new Date().getTime();\r\n                    var maxTimeWait_1 = 2000;\r\n                    var interval_1 = setInterval(function () {\r\n                        if (wrapperComponent.offsetWidth) {\r\n                            var bounds = handleCalculateBounds.call(_this, scale, false);\r\n                            _this.stateProvider.positionX = bounds.minPositionX;\r\n                            _this.stateProvider.positionY = bounds.minPositionY;\r\n                            _this.applyTransformation(null, null, null);\r\n                            clearInterval(interval_1);\r\n                            interval_1 = null;\r\n                        }\r\n                        else if (new Date().getTime() - startTime_1 > maxTimeWait_1) {\r\n                            clearInterval(interval_1);\r\n                            interval_1 = null;\r\n                        }\r\n                    }, 20);\r\n                }\r\n                else {\r\n                    _this.applyTransformation(null, null, null);\r\n                }\r\n            });\r\n        };\r\n        _this.applyTransformation = function (newScale, posX, posY) {\r\n            if (!_this.mounted)\r\n                return;\r\n            var contentComponent = _this.state.contentComponent;\r\n            var onZoomChange = _this.props.onZoomChange;\r\n            var _a = _this.stateProvider, previousScale = _a.previousScale, scale = _a.scale, positionX = _a.positionX, positionY = _a.positionY;\r\n            if (!contentComponent)\r\n                return console.error(\"There is no content component\");\r\n            var transform = \"translate(\" + (posX || positionX) + \"px, \" + (posY ||\r\n                positionY) + \"px) scale(\" + (newScale || scale) + \")\";\r\n            contentComponent.style.transform = transform;\r\n            contentComponent.style.WebkitTransform = transform;\r\n            // force update to inject state to the context\r\n            _this.forceUpdate();\r\n            if (onZoomChange && previousScale !== scale) {\r\n                handleCallback(onZoomChange, _this.getCallbackProps());\r\n            }\r\n        };\r\n        //////////\r\n        // Props\r\n        //////////\r\n        _this.getCallbackProps = function () { return getValidPropsFromObject(_this.stateProvider); };\r\n        return _this;\r\n    }\r\n    StateProvider.prototype.componentDidMount = function () {\r\n        var passiveOption = makePassiveEventOption(false);\r\n        // Panning on window to allow panning when mouse is out of wrapper\r\n        window.addEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\r\n        window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\r\n        window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\r\n    };\r\n    StateProvider.prototype.componentWillUnmount = function () {\r\n        var passiveOption = makePassiveEventOption(false);\r\n        window.removeEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\r\n        window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\r\n        window.removeEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\r\n        handleDisableAnimation.call(this);\r\n    };\r\n    StateProvider.prototype.componentDidUpdate = function (oldProps, oldState) {\r\n        var _a = this.state, wrapperComponent = _a.wrapperComponent, contentComponent = _a.contentComponent;\r\n        var dynamicValues = this.props.dynamicValues;\r\n        if (!oldState.contentComponent && contentComponent) {\r\n            this.stateProvider.contentComponent = contentComponent;\r\n        }\r\n        if (!oldState.wrapperComponent &&\r\n            wrapperComponent &&\r\n            wrapperComponent !== undefined) {\r\n            this.stateProvider.wrapperComponent = wrapperComponent;\r\n            this.windowToWrapperScaleX = getWindowScaleX(wrapperComponent);\r\n            this.windowToWrapperScaleY = getWindowScaleY(wrapperComponent);\r\n            // Zooming events on wrapper\r\n            var passiveOption = makePassiveEventOption(false);\r\n            wrapperComponent.addEventListener(\"wheel\", this.handleWheel, passiveOption);\r\n            wrapperComponent.addEventListener(\"dblclick\", this.handleDbClick, passiveOption);\r\n            wrapperComponent.addEventListener(\"touchstart\", this.handleTouchStart, passiveOption);\r\n            wrapperComponent.addEventListener(\"touchmove\", this.handleTouch, passiveOption);\r\n            wrapperComponent.addEventListener(\"touchend\", this.handleTouchStop, passiveOption);\r\n        }\r\n        // set bound for animations\r\n        if ((wrapperComponent && contentComponent) ||\r\n            oldProps.dynamicValues !== dynamicValues) {\r\n            this.maxBounds = handleCalculateBounds.call(this, this.stateProvider.scale, this.stateProvider.options.limitToWrapper);\r\n        }\r\n        // must be at the end of the update function, updates\r\n        if (oldProps.dynamicValues && oldProps.dynamicValues !== dynamicValues) {\r\n            this.animation = null;\r\n            this.stateProvider = __assign(__assign({}, this.stateProvider), mergeProps(this.stateProvider, dynamicValues));\r\n            this.applyTransformation(null, null, null);\r\n        }\r\n    };\r\n    StateProvider.prototype.render = function () {\r\n        var _a = this.state, wrapperComponent = _a.wrapperComponent, contentComponent = _a.contentComponent;\r\n        /**\r\n         * Context provider value\r\n         */\r\n        var value = {\r\n            loaded: Boolean(wrapperComponent && contentComponent),\r\n            state: this.getCallbackProps(),\r\n            dispatch: {\r\n                setScale: this.setScale,\r\n                setPositionX: this.setPositionX,\r\n                setPositionY: this.setPositionY,\r\n                zoomIn: this.zoomIn,\r\n                zoomOut: this.zoomOut,\r\n                setTransform: this.setTransform,\r\n                resetTransform: this.resetTransform,\r\n                setDefaultState: this.setDefaultState,\r\n            },\r\n            nodes: {\r\n                setWrapperComponent: this.setWrapperComponent,\r\n                setContentComponent: this.setContentComponent,\r\n            },\r\n        };\r\n        var children = this.props.children;\r\n        var content = typeof children === \"function\"\r\n            ? children(__assign(__assign({}, value.state), value.dispatch))\r\n            : children;\r\n        return React.createElement(Context.Provider, { value: value }, content);\r\n    };\r\n    return StateProvider;\r\n}(Component));\n\nvar TransformWrapper = function (_a) {\r\n    var children = _a.children, defaultPositionX = _a.defaultPositionX, defaultPositionY = _a.defaultPositionY, defaultScale = _a.defaultScale, onWheelStart = _a.onWheelStart, onWheel = _a.onWheel, onWheelStop = _a.onWheelStop, onPanningStart = _a.onPanningStart, onPanning = _a.onPanning, onPanningStop = _a.onPanningStop, onPinchingStart = _a.onPinchingStart, onPinching = _a.onPinching, onPinchingStop = _a.onPinchingStop, onZoomChange = _a.onZoomChange, rest = __rest(_a, [\"children\", \"defaultPositionX\", \"defaultPositionY\", \"defaultScale\", \"onWheelStart\", \"onWheel\", \"onWheelStop\", \"onPanningStart\", \"onPanning\", \"onPanningStop\", \"onPinchingStart\", \"onPinching\", \"onPinchingStop\", \"onZoomChange\"]);\r\n    var props = __assign({}, rest);\r\n    if (props.options && props.options.limitToWrapper) {\r\n        props.options.limitToBounds = true;\r\n    }\r\n    return (React.createElement(StateProvider, { defaultValues: deleteUndefinedProps({\r\n            positionX: defaultPositionX,\r\n            positionY: defaultPositionY,\r\n            scale: defaultScale,\r\n        }), dynamicValues: deleteUndefinedProps(getValidPropsFromObject(props)), onWheelStart: onWheelStart, onWheel: onWheel, onWheelStop: onWheelStop, onPanningStart: onPanningStart, onPanning: onPanning, onPanningStop: onPanningStop, onPinchingStart: onPinchingStart, onPinching: onPinching, onPinchingStop: onPinchingStop, onZoomChange: onZoomChange }, children));\r\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".TransformComponent-module_container__3NwNd {\\n  position: relative;\\n  width: fit-content;\\n  height: fit-content;\\n  overflow: hidden;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Safari */\\n  -khtml-user-select: none; /* Konqueror HTML */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none;\\n  margin: 0;\\n  padding: 0;\\n}\\n.TransformComponent-module_content__TZU5O {\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: fit-content;\\n  height: fit-content;\\n  margin: 0;\\n  padding: 0;\\n  transform-origin: 0% 0%;\\n}\\n.TransformComponent-module_content__TZU5O img {\\n  pointer-events: none;\\n}\\n\";\nvar styles = {\"container\":\"TransformComponent-module_container__3NwNd\",\"content\":\"TransformComponent-module_content__TZU5O\"};\nstyleInject(css);\n\nvar TransformComponent = /** @class */ (function (_super) {\r\n    __extends(TransformComponent, _super);\r\n    function TransformComponent() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.wrapperRef = React.createRef();\r\n        _this.contentRef = React.createRef();\r\n        return _this;\r\n    }\r\n    TransformComponent.prototype.componentDidMount = function () {\r\n        var nodes = this.context.nodes;\r\n        nodes.setWrapperComponent(this.wrapperRef.current);\r\n        nodes.setContentComponent(this.contentRef.current);\r\n    };\r\n    TransformComponent.prototype.render = function () {\r\n        var children = this.props.children;\r\n        var _a = this.context.state, positionX = _a.positionX, positionY = _a.positionY, scale = _a.scale, _b = _a.options, wrapperClass = _b.wrapperClass, contentClass = _b.contentClass;\r\n        var style = {\r\n            WebkitTransform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\",\r\n            transform: \"translate(\" + positionX + \"px, \" + positionY + \"px) scale(\" + scale + \")\",\r\n        };\r\n        return (React.createElement(\"div\", { ref: this.wrapperRef, className: \"react-transform-component \" + styles.container + \" \" + wrapperClass },\r\n            React.createElement(\"div\", { ref: this.contentRef, className: \"react-transform-element \" + styles.content + \" \" + contentClass, style: style }, children)));\r\n    };\r\n    return TransformComponent;\r\n}(React.Component));\r\nTransformComponent.contextType = Context;\n\nexport { TransformComponent, TransformWrapper };\n//# sourceMappingURL=index.es.js.map\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { createRef, PureComponent } from 'react';\n\nimport { CAROUSEL_ITEM_GAP } from 'Component/CarouselScroll/CarouselScroll.config';\nimport CarouselScrollArrow from 'Component/CarouselScrollArrow';\nimport CarouselScrollItem from 'Component/CarouselScrollItem';\nimport { ChildrenType } from 'Type/Common.type';\nimport { noopFn } from 'Util/Common';\nimport CSS from 'Util/CSS';\nimport { isRtl } from 'Util/CSS/CSS';\n\nimport './CarouselScroll.style';\n\n/** @namespace Component/CarouselScroll/Component */\nexport class CarouselScroll extends PureComponent {\n    static propTypes = {\n        children: ChildrenType.isRequired,\n        showArrow: PropTypes.bool,\n        showedItemCount: PropTypes.number,\n        onChange: PropTypes.func,\n        activeItemId: PropTypes.number,\n        isImageZoomPopupActive: PropTypes.bool\n    };\n\n    static defaultProps = {\n        showArrow: true,\n        showedItemCount: 1,\n        onChange: noopFn,\n        activeItemId: null,\n        isImageZoomPopupActive: false\n    };\n\n    state = {\n        activeItemId: 0,\n        firstCarouselItemId: 0\n    };\n\n    itemRef = createRef();\n\n    carouselRef = createRef();\n\n    handleArrowClick = this.handleArrowClick.bind(this);\n\n    handleChange = this.handleChange.bind(this);\n\n    componentDidMount() {\n        const { showedItemCount } = this.props;\n\n        const margin = CAROUSEL_ITEM_GAP;\n        const width = this.getCarouselWidth(showedItemCount);\n\n        CSS.setVariable(this.carouselRef, 'carousel-scroll-gap', `${margin}px`);\n        CSS.setVariable(this.carouselRef, 'carousel-width', width);\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            children: { length: prevChildrenLength },\n            showedItemCount: prevShowedItemCount\n        } = prevProps;\n\n        const {\n            activeItemId,\n            children: { length: childrenLength },\n            showedItemCount\n        } = this.props;\n\n        const { activeItemId: prevActiveItemId } = this.state;\n\n        if (prevChildrenLength !== childrenLength) {\n            this.handleReset();\n\n            return;\n        }\n\n        if (activeItemId !== null && activeItemId !== prevActiveItemId) {\n            this.handleChange(activeItemId);\n        }\n\n        if (prevShowedItemCount !== showedItemCount) {\n            const width = this.getCarouselWidth(showedItemCount);\n\n            CSS.setVariable(this.carouselRef, 'carousel-width', width);\n            this.updateFirstSlide();\n        }\n    }\n\n    updateFirstSlide() {\n        const { firstCarouselItemId } = this.state;\n\n        const maxId = this.getMaxFirstItemId();\n\n        if (firstCarouselItemId > maxId) {\n            this.setTranslate(maxId);\n            this.setState({ firstCarouselItemId: maxId });\n        }\n    }\n\n    getCarouselWidth(showedItemCount) {\n        const margin = CAROUSEL_ITEM_GAP;\n        const { offsetWidth: cardWidth } = this.itemRef.current;\n\n        return `${ (margin + cardWidth) * showedItemCount - margin }px`;\n    }\n\n    getNextTranslate(nextId) {\n        const { offsetWidth } = this.itemRef.current;\n        const multiplier = isRtl() ? nextId : -nextId;\n\n        return `${ multiplier * (offsetWidth + CAROUSEL_ITEM_GAP) }px`;\n    }\n\n    setTranslate(nextId) {\n        const translate = this.getNextTranslate(nextId);\n\n        CSS.setVariable(this.carouselRef, 'translateX', translate);\n    }\n\n    getMaxFirstItemId() {\n        const { children: { length: childrenLength }, showedItemCount } = this.props;\n\n        return Math.max(childrenLength - showedItemCount, 0);\n    }\n\n    getNewCarouselItemId(isNextArrow) {\n        const { showedItemCount } = this.props;\n        const { firstCarouselItemId: prevFirstCarouselItemId } = this.state;\n\n        const scrollStep = Math.ceil(showedItemCount / 2);\n\n        return isNextArrow\n            ? Math.min(prevFirstCarouselItemId + scrollStep, this.getMaxFirstItemId())\n            : Math.max(prevFirstCarouselItemId - scrollStep, 0);\n    }\n\n    handleArrowClick(isNextArrow) {\n        const firstCarouselItemId = this.getNewCarouselItemId(isNextArrow);\n\n        this.setTranslate(firstCarouselItemId);\n        this.setState({ firstCarouselItemId });\n    }\n\n    handleChange(nextId) {\n        const { onChange, showedItemCount } = this.props;\n        const { firstCarouselItemId } = this.state;\n\n        onChange(nextId);\n        this.setState({ activeItemId: nextId });\n\n        if (nextId < firstCarouselItemId || nextId >= firstCarouselItemId + showedItemCount) {\n            const newId = Math.min(this.getMaxFirstItemId(), nextId);\n\n            this.setTranslate(newId);\n            this.setState({ firstCarouselItemId: newId });\n        }\n    }\n\n    handleReset() {\n        const { onChange } = this.props;\n\n        const activeItemId = 0;\n\n        CSS.setVariable(this.carouselRef, 'translateX', 0);\n\n        onChange(activeItemId);\n        this.setState({ activeItemId });\n    }\n\n    renderArrow(isNextArrow = false) {\n        const { showArrow, children: { length: childrenLength }, showedItemCount } = this.props;\n        const { firstCarouselItemId } = this.state;\n\n        if (!showArrow || childrenLength <= showedItemCount) {\n            return null;\n        }\n\n        // render hidden arrow to avoid carousel jumping on error hide/appear\n        const isInvisible = (!isNextArrow && firstCarouselItemId === 0)\n            || (isNextArrow && firstCarouselItemId >= this.getMaxFirstItemId());\n\n        return (\n            <CarouselScrollArrow\n              isNextArrow={ isNextArrow }\n              onClick={ this.handleArrowClick }\n              isInvisible={ isInvisible }\n            />\n        );\n    }\n\n    renderContentItem(child, key) {\n        const { activeItemId } = this.state;\n\n        return (\n            <CarouselScrollItem\n              key={ key }\n              position={ key }\n              onClick={ this.handleChange }\n              itemRef={ this.itemRef }\n              isActive={ key === activeItemId }\n            >\n                { child }\n            </CarouselScrollItem>\n        );\n    }\n\n    renderContent() {\n        const { children, isImageZoomPopupActive } = this.props;\n\n        return (\n            <div block=\"CarouselScroll\" elem=\"ContentWrapper\" mods={ { isImageZoomPopupActive } }>\n                <div block=\"CarouselScroll\" elem=\"Content\">\n                    { children.map(this.renderContentItem.bind(this)) }\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div block=\"CarouselScroll\" ref={ this.carouselRef }>\n                { this.renderArrow() }\n                { this.renderContent() }\n                { this.renderArrow(true) }\n            </div>\n        );\n    }\n}\n\nexport default CarouselScroll;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nexport const CAROUSEL_ITEM_GAP = 18;\nexport const CAROUSEL_ITEM_WIDTH = 55;\nexport const ARROW_SAFE_AREA = 25;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport CarouselScrollArrow from './CarouselScrollArrow.component';\n\n/** @namespace Component/CarouselScrollArrow/Container */\nexport class CarouselScrollArrowContainer extends PureComponent {\n    static propTypes = {\n        isNextArrow: PropTypes.bool.isRequired,\n        onClick: PropTypes.func.isRequired,\n        isInvisible: PropTypes.bool.isRequired\n    };\n\n    containerFunctions = {\n        onClick: this.onClick.bind(this)\n    };\n\n    containerProps() {\n        const { isNextArrow, isInvisible } = this.props;\n\n        return {\n            mods: {\n                isNextArrow,\n                isInvisible\n            }\n        };\n    }\n\n    onClick() {\n        const { onClick, isNextArrow } = this.props;\n\n        onClick(isNextArrow);\n    }\n\n    render() {\n        return (\n            <CarouselScrollArrow\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default CarouselScrollArrowContainer;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { ChildrenType, RefType } from 'Type/Common.type';\nimport { noopFn } from 'Util/Common';\n\nimport CarouselScrollItem from './CarouselScrollItem.component';\n\n/** @namespace Component/CarouselScrollItem/Container */\nexport class CarouselScrollItemContainer extends PureComponent {\n    static propTypes = {\n        isActive: PropTypes.bool,\n        itemRef: RefType,\n        onClick: PropTypes.func,\n        children: ChildrenType,\n        position: PropTypes.number.isRequired\n    };\n\n    static defaultProps = {\n        isActive: false,\n        itemRef: noopFn,\n        onClick: noopFn,\n        children: []\n    };\n\n    containerFunctions = {\n        onClick: this.onClick.bind(this)\n    };\n\n    containerProps() {\n        const {\n            isActive,\n            itemRef,\n            children\n        } = this.props;\n\n        return {\n            isActive,\n            itemRef,\n            children\n        };\n    }\n\n    onClick() {\n        const { onClick, position } = this.props;\n\n        onClick(position);\n    }\n\n    render() {\n        return (\n            <CarouselScrollItem\n              { ...this.containerFunctions }\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default CarouselScrollItemContainer;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport { withRouter } from 'react-router';\n\nimport { LocationType } from 'Type/Router.type';\nimport media, { PRODUCT_MEDIA } from 'Util/Media/Media';\n\nimport ProductGallery from './ProductGalleryBaseImage.component';\nimport { INITIAL_SCALE, TRANSFORMATION_DELAY, TRANSFORMATION_SPEED } from './ProductGalleryBaseImage.config';\n\n/** @namespace Component/ProductGalleryBaseImage/Container */\nexport class ProductGalleryBaseImageContainer extends Component {\n    static propTypes = {\n        disableZoom: PropTypes.func.isRequired,\n        scale: PropTypes.number.isRequired,\n        previousScale: PropTypes.number.isRequired,\n        index: PropTypes.number.isRequired,\n        mediaData: PropTypes.shape({\n            id: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.number\n            ]),\n            label: PropTypes.string,\n            file: PropTypes.string,\n            base: PropTypes.shape({\n                url: PropTypes.string\n            })\n        }).isRequired,\n        isZoomEnabled: PropTypes.bool.isRequired,\n        setTransform: PropTypes.func.isRequired,\n        location: LocationType.isRequired\n    };\n\n    shouldComponentUpdate(nextProps) {\n        const { scale, mediaData: { id } } = this.props;\n        const { scale: nextScale, mediaData: { id: nextId } } = nextProps;\n\n        if (scale !== nextScale || id !== nextId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            scale,\n            previousScale,\n            disableZoom,\n            location: { pathname },\n            setTransform\n        } = this.props;\n        const { location: { pathname: prevPathname } } = prevProps;\n\n        if (pathname !== prevPathname && scale !== INITIAL_SCALE) {\n            setTimeout(\n                () => setTransform(null, null, INITIAL_SCALE, TRANSFORMATION_SPEED),\n                TRANSFORMATION_DELAY\n            );\n        }\n\n        if (scale === 1 && previousScale !== 1) {\n            disableZoom();\n        }\n    }\n\n    containerProps() {\n        return {\n            alt: this._getAlt(),\n            src: this._getSrc()\n        };\n    }\n\n    _getAlt() {\n        const { mediaData: { label } = {} } = this.props;\n\n        return label || '';\n    }\n\n    _getSrc() {\n        const {\n            mediaData: { file, base: { url: baseUrl } = {} },\n            isZoomEnabled\n        } = this.props;\n\n        if (!isZoomEnabled) {\n            return baseUrl || media(file, PRODUCT_MEDIA);\n        }\n\n        return file ? media(file, PRODUCT_MEDIA) : baseUrl;\n    }\n\n    render() {\n        return (\n            <ProductGallery\n              { ...this.containerProps() }\n            />\n        );\n    }\n}\n\nexport default withRouter(\n    ProductGalleryBaseImageContainer\n);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport Image from 'Component/Image';\nimport {\n    IMAGE_TYPE, PLACEHOLDER_TYPE, THUMBNAIL_KEY, VIDEO_TYPE\n} from 'Component/ProductGallery/ProductGallery.config';\nimport media, { PRODUCT_MEDIA } from 'Util/Media';\n\nimport './ProductGalleryThumbnailImage.style';\n\n/** @namespace Component/ProductGalleryThumbnailImage/Component */\nexport class ProductGalleryThumbnailImage extends PureComponent {\n    static propTypes = {\n        media: PropTypes.shape({\n            label: PropTypes.string,\n            file: PropTypes.string,\n            media_type: PropTypes.string,\n            id: PropTypes.oneOfType([\n                PropTypes.string,\n                PropTypes.number\n            ]),\n            thumbnail: PropTypes.shape({\n                url: PropTypes.string\n            })\n        }).isRequired\n    };\n\n    renderMedia() {\n        const { media: { media_type } } = this.props;\n\n        switch (media_type) {\n        case VIDEO_TYPE:\n            return this.renderVideo();\n        case IMAGE_TYPE:\n            return this.renderImage();\n        case PLACEHOLDER_TYPE:\n            return this.renderPlaceholder();\n        default:\n            return null;\n        }\n    }\n\n    renderPlaceholder() {\n        return (\n            <Image\n              ratio=\"custom\"\n              mix={ { block: 'ProductGalleryThumbnailImage' } }\n              isPlaceholder\n            />\n        );\n    }\n\n    renderVideo() {\n        const {\n            media: {\n                thumbnail: { url },\n                label\n            }\n        } = this.props;\n\n        return (\n            <Image\n              ratio=\"custom\"\n              src={ url }\n              alt={ label }\n              mix={ { block: 'ProductGalleryThumbnailImage' } }\n            />\n        );\n    }\n\n    renderImage() {\n        const {\n            media: {\n                label: alt,\n                file,\n                thumbnail: { url: thumbnailUrl } = {},\n                id\n            }\n        } = this.props;\n\n        if (id === THUMBNAIL_KEY) {\n            return this.renderPlaceholder();\n        }\n\n        const src = thumbnailUrl || media(file, PRODUCT_MEDIA);\n\n        return (\n            <Image\n              src={ src }\n              alt={ alt }\n              ratio=\"custom\"\n              mix={ { block: 'ProductGalleryThumbnailImage' } }\n            />\n        );\n    }\n\n    render() {\n        return (\n            <div\n              block=\"ProductGalleryThumbnailImage\"\n            >\n                { this.renderMedia() }\n            </div>\n        );\n    }\n}\n\nexport default ProductGalleryThumbnailImage;\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport { connect } from 'react-redux';\n\nimport VideoPopup from './VideoPopup.component';\nimport { VIDEO_POPUP_ID } from './VideoPopup.config';\n\n/** @namespace Component/VideoPopup/Container/mapStateToProps */\nexport const mapStateToProps = (state) => ({\n    payload: state.PopupReducer.popupPayload[VIDEO_POPUP_ID] || {}\n});\n\n/** @namespace Component/VideoPopup/Container/mapDispatchToProps */\nexport const mapDispatchToProps = () => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoPopup);\n","/**\n * ScandiPWA - Progressive Web App for Magento\n *\n * Copyright  Scandiweb, Inc. All rights reserved.\n * See LICENSE for license details.\n *\n * @license OSL-3.0 (Open Software License (\"OSL\") v. 3.0)\n * @package scandipwa/scandipwa\n * @link https://github.com/scandipwa/scandipwa\n */\n\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { VIDEO_POPUP_ID } from 'Component/VideoPopup/VideoPopup.config';\nimport { hideActivePopup } from 'Store/Overlay/Overlay.action';\nimport { showPopup } from 'Store/Popup/Popup.action';\nimport { MediaItemType } from 'Type/ProductList.type';\n\nimport VideoThumbnail from './VideoThumbnail.component';\n\n/** @namespace Component/VideoThumbnail/Container/mapStateToProps\n */\nexport const mapStateToProps = () => ({});\n\n/** @namespace Component/VideoThumbnail/Container/mapDispatchToProps */\nexport const mapDispatchToProps = (dispatch) => ({\n    showPopup: (payload) => dispatch(showPopup(VIDEO_POPUP_ID, payload)),\n    hideActivePopup: () => dispatch(hideActivePopup())\n});\n\n/**\n * @class VideoThumbnailContainer\n * @namespace Component/VideoThumbnail/Container */\nexport class VideoThumbnailContainer extends PureComponent {\n    static propTypes = {\n        media: MediaItemType.isRequired,\n        showPopup: PropTypes.func.isRequired,\n        isVideoZoomed: PropTypes.bool.isRequired,\n        hideActivePopup: PropTypes.func.isRequired,\n        onZoomedVideoClick: PropTypes.func.isRequired\n    };\n\n    containerFunctions = {\n        onPlayClick: this.onPlayClick.bind(this)\n    };\n\n    /**\n     * Handles events that occur when the user clicks or taps on a video thumbnail.\n     * Displays a popup with the corresponding video.\n     * @param event\n     * @private\n     */\n    onPlayClick(event) {\n        const {\n            media,\n            media: {\n                video_content: {\n                    video_title\n                } = {}\n            } = {},\n            showPopup,\n            isVideoZoomed,\n            onZoomedVideoClick\n        } = this.props;\n\n        event.preventDefault();\n\n        if (isVideoZoomed) {\n            onZoomedVideoClick();\n        }\n\n        setTimeout(() => {\n            showPopup({\n                media,\n                title: video_title\n            });\n        }, 0);\n    }\n\n    render() {\n        const { media } = this.props;\n\n        return (\n            <VideoThumbnail\n              media={ media }\n              { ...this.containerFunctions }\n            />\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoThumbnailContainer);\n"],"sourceRoot":""}